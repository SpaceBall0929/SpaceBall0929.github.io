<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.2"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-CS61A/27-scheme lab10 hw7" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/08/20/CS61A/27-scheme%20lab10%20hw7/" class="article-date">
  <time datetime="2022-08-20T03:33:24.000Z" itemprop="datePublished">2022-08-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CS61A/">CS61A</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/20/CS61A/27-scheme%20lab10%20hw7/">CS61A-27-scheme</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<blockquote>
<p>Scheme itself is not commonly used in production, but has influenced many other languages, and is a good example of a functional programming language.</p>
</blockquote>
</blockquote>
<h1 id="Scheme-Intro"><a href="#Scheme-Intro" class="headerlink" title="Scheme Intro"></a>Scheme Intro</h1><p>在终端使用sheme：输入<code>mit-scheme</code></p>
<h2 id="Scheme-expressions"><a href="#Scheme-expressions" class="headerlink" title="Scheme expressions"></a>Scheme expressions</h2><ul>
<li><p>Primitive expressions: <code>2 3.3 true + quotient </code></p>
</li>
<li><p>Combinations: <code>(quotient 10 2) (not true)</code></p>
</li>
</ul>
<p>Numbers -&gt; self-evaluating;</p>
<p>symbols -&gt; bound to values.</p>
<p>scheme里的functions叫procedures</p>
<p>Call expressions include an operator and 0 or more operands in parentheses：</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106170253292.png" alt="image-20221106170253292" style="zoom:67%;" />

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106170506716.png" alt="image-20221106170506716" style="zoom:80%;" />

<p>判断右边的东西是不是<code>?</code>左边的东西:</p>
<blockquote>
<p>这个<code>?</code>其实是函数名的一部分啦… …</p>
</blockquote>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106170806986.png" alt="image-20221106170806986" style="zoom:80%;" />

<h2 id="Scheme-Forms"><a href="#Scheme-Forms" class="headerlink" title="Scheme Forms"></a>Scheme Forms</h2><p>A combination that is not a call expression is a special form.</p>
<ul>
<li> if expression: <code>(if  &lt;predicate&gt; &lt;consequent&gt; &lt;alternative&gt; )</code></li>
</ul>
<ol>
<li>evaluate <code>&lt;predicate&gt;</code></li>
<li>evaluate <code>&lt;consequent&gt;</code> or <code>&lt;alternative&gt;</code></li>
</ol>
<ul>
<li><p> and or<code>(and  &lt;e1&gt; ... &lt;en&gt; ), (or &lt;e1&gt; ... &lt;en&gt; )</code></p>
</li>
<li><p> Binding symbols: <code>(define &lt;symbol&gt; &lt;expression&gt; )</code></p>
</li>
</ul>
  <img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106171944068.png" alt="image-20221106171944068" style="zoom:80%;" />

<ul>
<li> New procedures: <code>(define (&lt;symbol&gt; &lt;formal parameters&gt;) &lt;body&gt;)</code></li>
</ul>
  <img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106172025295.png" alt="image-20221106172025295" style="zoom:80%;" />

  

<blockquote>
<p>有点像汇编语言</p>
</blockquote>
<h6 id="自己上机操作"><a href="#自己上机操作" class="headerlink" title="自己上机操作"></a>自己上机操作</h6><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106172544986.png" alt="image-20221106172544986" style="zoom:67%;" />

<p>可以嵌套:</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106172600444.png" alt="image-20221106172600444" style="zoom:67%;" />

<p>递归调用:</p>
<p>牛顿迭代法求sqrt</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106173332774.png" alt="image-20221106173332774" style="zoom:80%;" />

<h5 id="lambda-expressions"><a href="#lambda-expressions" class="headerlink" title="lambda expressions"></a>lambda expressions</h5><p>evaluate to anonymous procedures</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106173607583.png" alt="image-20221106173607583" style="zoom:80%;" />

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106173716179.png" alt="image-20221106173716179" style="zoom:80%;" />

<h5 id="more-special-forms"><a href="#more-special-forms" class="headerlink" title="more special forms"></a>more special forms</h5><h6 id="Cond-amp-Begin"><a href="#Cond-amp-Begin" class="headerlink" title="Cond &amp; Begin"></a>Cond &amp; Begin</h6><p> cond behaves like if-elif-else statements in Python</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106203717850.png" alt="image-20221106203717850" style="zoom:80%;" />

<p>begin combines multiple expressions into one expression</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106204134929.png" alt="image-20221106204134929" style="zoom: 67%;" />

<p> let binds symbols to values temporarily; just for one expression</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106204406176.png" alt="image-20221106204406176" style="zoom:80%;" />

<p>注:在scheme中,一般用let不用define,define就像宏一样用于定义“permanent”的东西</p>
<h6 id="eg-Sierpinski’s-Triangle"><a href="#eg-Sierpinski’s-Triangle" class="headerlink" title="eg:Sierpinski’s Triangle"></a>eg:Sierpinski’s Triangle</h6><p>操控小箭头</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">fd</span> <span class="number">40</span>) //向前</span><br><span class="line">(<span class="name">rt</span> <span class="number">90</span>) //右转<span class="number">90</span>°</span><br><span class="line">(<span class="name">lt</span> <span class="number">90</span>)</span><br></pre></td></tr></table></figure>

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106205310037.png" alt="image-20221106205310037" style="zoom:80%;" />

<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">speed</span> <span class="number">0</span>)</span><br><span class="line">(<span class="name">rt</span> <span class="number">90</span>)</span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">line</span>) (<span class="name">fd</span> <span class="number">100</span>))</span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">twice</span> fn) (<span class="name">fn</span>) (<span class="name">fn</span>))</span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">repeat</span> k fn)</span><br><span class="line">  <span class="comment">; Repeat fn k times.</span></span><br><span class="line">  (<span class="name">fn</span>)</span><br><span class="line">  (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">&gt;</span></span> k <span class="number">1</span>) (<span class="name">repeat</span> (<span class="name"><span class="built_in">-</span></span> k <span class="number">1</span>) fn)))</span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">tri</span> fn)</span><br><span class="line">  <span class="comment">; Repeat fn 3 times, each followed by a 120 degree turn.</span></span><br><span class="line">  (<span class="name">repeat</span> <span class="number">3</span> (<span class="name"><span class="built_in">lambda</span></span> () (<span class="name">fn</span>) (<span class="name">lt</span> <span class="number">120</span>))))</span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">sier</span> d k)</span><br><span class="line">  <span class="comment">; Draw three legs of Sierpinski&#x27;s triangle to depth d.</span></span><br><span class="line">  (<span class="name">tri</span> (<span class="name"><span class="built_in">lambda</span></span> ()</span><br><span class="line">         (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">=</span></span> k <span class="number">1</span>) (<span class="name">fd</span> d) (<span class="name">leg</span> d k)))))</span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">leg</span> d k)</span><br><span class="line">  <span class="comment">; Draw one leg of Sierpinski&#x27;s triangle to depth d.</span></span><br><span class="line">  (<span class="name">sier</span> (<span class="name"><span class="built_in">/</span></span> d <span class="number">2</span>) (<span class="name"><span class="built_in">-</span></span> k <span class="number">1</span>))</span><br><span class="line">  (<span class="name">penup</span>) (<span class="name">fd</span> d) (<span class="name">pendown</span>))</span><br><span class="line">(<span class="name">sier</span> <span class="number">200</span> <span class="number">5</span>)</span><br></pre></td></tr></table></figure>



<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106205650546.png" alt="image-20221106205650546" style="zoom:67%;" />

<h5 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a>Lists</h5><p>Every scheme list is a link list</p>
<ul>
<li>cons: Two-argument procedure that creates a linked list </li>
<li>car: Procedure that returns the first element of a list</li>
<li>cdr: Procedure that returns the rest of a list</li>
<li>nil: The empty list</li>
</ul>
<p> Scheme lists are written in parentheses with elements separated by spaces</p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106211350945.png" alt="image-20221106211350945"></p>
<p>还可以draw</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106211737244.png" alt="image-20221106211737244" style="zoom: 67%;" />

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106212800466.png" alt="image-20221106212800466" style="zoom:67%;" />

<h5 id="Symbolic-Programming"><a href="#Symbolic-Programming" class="headerlink" title="Symbolic Programming"></a>Symbolic Programming</h5><p>quote可以让symbol也变成value</p>
<blockquote>
<p>人话:字符</p>
</blockquote>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106213749144.png" alt="image-20221106213749144"></p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106213759104.png" alt="image-20221106213759104"></p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106213854836.png" alt="image-20221106213854836" style="zoom:80%;" />

<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106213915060.png" alt="image-20221106213915060"></p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221106213939837.png" alt="image-20221106213939837"></p>
<h1 id="Lab-10"><a href="#Lab-10" class="headerlink" title="Lab 10"></a>Lab 10</h1><h4 id="1"><a href="#1" class="headerlink" title="1"></a>1</h4><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">------quotient是向下取整------</span><br><span class="line">scm&gt; (<span class="name"><span class="built_in">quotient</span></span> <span class="number">29</span> <span class="number">5</span>)</span><br><span class="line">? <span class="number">6</span></span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">? <span class="number">5</span></span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">------Scheme uses <span class="symbol">&#x27;=</span>&#x27; instead of <span class="symbol">&#x27;==</span>&#x27; for comparison------</span><br><span class="line">scm&gt; (<span class="name"><span class="built_in">=</span></span> <span class="number">1</span> <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">------or 最原始的感觉,遇到true的值就停了------</span><br><span class="line">scm&gt; (<span class="name"><span class="built_in">or</span></span> <span class="number">1</span> <span class="literal">#t</span>)                  <span class="comment">; or special form short circuits</span></span><br><span class="line">? #t</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line">? #f</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line">? <span class="number">1</span></span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">------define的返回值------</span><br><span class="line">scm&gt; (<span class="name"><span class="built_in">define</span></span> x <span class="number">3</span>)</span><br><span class="line">? x</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">------lambda后面的是形参,不是前面提到的值------</span><br><span class="line">scm&gt; (<span class="name"><span class="built_in">define</span></span> x (<span class="name"><span class="built_in">lambda</span></span> (y) (<span class="name"><span class="built_in">*</span></span> y <span class="number">2</span>)))</span><br><span class="line">? x</span><br><span class="line">-- OK! --</span><br><span class="line">scm&gt; (<span class="name">x</span> y)</span><br><span class="line">? [<span class="name">14</span>,<span class="number">7</span>]</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line">? <span class="number">14</span></span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">------if语句没只过去,但是hi是在传参的时候被print的------</span><br><span class="line">scm&gt; (<span class="name">foo</span> <span class="number">1</span> <span class="number">2</span> (<span class="name">print</span> <span class="symbol">&#x27;hi</span>))</span><br><span class="line">(<span class="name">line</span> <span class="number">1</span>)? hi</span><br><span class="line">(<span class="name">line</span> <span class="number">2</span>)? <span class="number">2</span></span><br><span class="line">-- OK! --</span><br><span class="line">------scheme传参是不用括号的！-------</span><br><span class="line"></span><br><span class="line">------被耍了草------</span><br><span class="line">scm&gt; ((<span class="name"><span class="built_in">lambda</span></span> (a) (<span class="name">print</span> <span class="symbol">&#x27;a</span>)) <span class="number">100</span>)</span><br><span class="line">? <span class="number">100</span></span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line">? <span class="symbol">&#x27;100</span></span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line">? a</span><br><span class="line">-- OK! --</span><br></pre></td></tr></table></figure>



<h4 id="2"><a href="#2" class="headerlink" title="2"></a>2</h4><p>关于什么时候加括号的问题：</p>
<p>函数定义<code>define (over-or-under num1 num2) </code> 应该是把后面 <code>函数名 参数</code>也看成一个expression了</p>
<blockquote>
<p>看来scheme对理解编译原理是有帮助的阿…</p>
</blockquote>
<h4 id="3"><a href="#3" class="headerlink" title="3"></a>3</h4><blockquote>
<p>Write the procedure <code>make-adder</code> which takes in an initial number, <code>num</code>, and then returns a procedure. This returned procedure takes in a number <code>inc</code> and returns the result of <code>num + inc</code>.</p>
</blockquote>
<p> Scheme will automatically <strong>return the last clause</strong> in your procedure.</p>
<p>更深的理解:</p>
<p><code>(操作  参数)</code></p>
<p>既然它会自动返回最后一个clause</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">make-adder</span> num) </span><br><span class="line">    (<span class="name"><span class="built_in">define</span></span> (<span class="name">add</span> inc) (<span class="name"><span class="built_in">+</span></span> num inc))</span><br><span class="line">    add)</span><br></pre></td></tr></table></figure>

<p>那最后一个clause就直接留一个函数吧!</p>
<h4 id="4"><a href="#4" class="headerlink" title="4"></a>4</h4><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">scm&gt; c</span><br><span class="line">? (<span class="name">3</span> (<span class="name">2</span> <span class="number">1</span>))</span><br><span class="line">-- OK! --</span><br><span class="line"></span><br><span class="line">scm&gt; (<span class="name"><span class="built_in">cdr</span></span> c)</span><br><span class="line">? (<span class="name">2</span> <span class="number">1</span>)</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">? ((<span class="name">2</span> <span class="number">1</span>))</span><br><span class="line">-- OK! --</span><br></pre></td></tr></table></figure>
<p>cdr是一个list</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">scm&gt; (<span class="name"><span class="built_in">cdr</span></span> (<span class="name"><span class="built_in">car</span></span> (<span class="name"><span class="built_in">cdr</span></span> c)))</span><br><span class="line">? nil</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">?</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">? ()</span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">? <span class="number">1</span></span><br><span class="line">-- Not quite. Try again! --</span><br><span class="line"></span><br><span class="line">? (<span class="name">1</span>)</span><br><span class="line">-- OK! --</span><br></pre></td></tr></table></figure>

<p><img src="https://inst.eecs.berkeley.edu/~cs61a/fa21/lab/lab10/assets/list2.png" alt="linked list"></p>
<p>2不是sublist的开头元素,而是这个list的第二个元素</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type out exactly how Scheme would print the list that will be defined in this problem (<span class="name">see</span> spec)</span><br><span class="line">? ((<span class="name">1</span>) <span class="number">2</span> (<span class="name">3</span> <span class="number">4</span>) <span class="number">5</span>)</span><br><span class="line">-- OK! --</span><br></pre></td></tr></table></figure>

<p>implement一个scheme list的方法:<br>先把打印形式写出来,然后再把cons和nil加进去</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> lst </span><br><span class="line">   (<span class="name"><span class="built_in">cons</span></span> (<span class="name"><span class="built_in">cons</span></span> <span class="number">1</span> nil) </span><br><span class="line">         (<span class="name"><span class="built_in">cons</span></span> <span class="number">2</span> </span><br><span class="line">                 (<span class="name"><span class="built_in">cons</span></span> (<span class="name"><span class="built_in">cons</span></span> <span class="number">3</span> (<span class="name"><span class="built_in">cons</span></span> <span class="number">4</span> nil)) </span><br><span class="line">                       (<span class="name"><span class="built_in">cons</span></span> <span class="number">5</span> nil)))</span><br><span class="line">         )</span><br><span class="line">     )</span><br></pre></td></tr></table></figure>

<h1 id="HW-07"><a href="#HW-07" class="headerlink" title="HW 07"></a>HW 07</h1><h5 id="2-1"><a href="#2-1" class="headerlink" title="2"></a>2</h5><p>这里的#t不能写成（#t），因为这是call的表达式，而#t是call不了的。</p>
<p>call的表达式一定要符合<code>(操作 被操作的东西)</code></p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">ordered?</span> s) </span><br><span class="line">    (<span class="name"><span class="built_in">cond</span></span> ((<span class="name"><span class="built_in">null?</span></span> s) <span class="literal">#t</span>)</span><br><span class="line">          ((<span class="name"><span class="built_in">null?</span></span> (<span class="name"><span class="built_in">cdr</span></span> s)) <span class="literal">#t</span>)</span><br><span class="line">          (<span class="name"><span class="built_in">else</span></span> </span><br><span class="line">                (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">&gt;</span></span> (<span class="name"><span class="built_in">car</span></span> s) (<span class="name"><span class="built_in">cadr</span></span> s))</span><br><span class="line">                  <span class="literal">#f</span></span><br><span class="line">                  (<span class="name">ordered?</span> (<span class="name"><span class="built_in">cdr</span></span> s))))</span><br><span class="line">        )</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<h4 id="3-1"><a href="#3-1" class="headerlink" title="3"></a>3</h4><p>总之要注意这一个test:</p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221108203318449.png" alt="image-20221108203318449"></p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">pow</span> base exp) </span><br><span class="line">    (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">=</span></span> <span class="number">1</span> base)</span><br><span class="line">        <span class="number">1</span></span><br><span class="line">        (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">even?</span></span> exp)</span><br><span class="line">        (<span class="name">square</span> (<span class="name">pow</span> base (<span class="name"><span class="built_in">/</span></span> exp <span class="number">2</span>)))</span><br><span class="line">        (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">=</span></span> <span class="number">1</span> exp)</span><br><span class="line">            base</span><br><span class="line">            (<span class="name"><span class="built_in">*</span></span> base (<span class="name">pow</span> base (<span class="name"><span class="built_in">-</span></span> exp <span class="number">1</span>)))</span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/20/CS61A/27-scheme%20lab10%20hw7/" data-id="cld15jd2d0011ggpge6ts2e7d" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Computer-Sciense/" rel="tag">Computer Sciense</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-CS61A/24-data examples" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/08/18/CS61A/24-data%20examples/" class="article-date">
  <time datetime="2022-08-18T03:33:24.000Z" itemprop="datePublished">2022-08-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CS61A/">CS61A</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/18/CS61A/24-data%20examples/">CS61A-24</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id=""><a href="#" class="headerlink" title=""></a></h2><h3 id="Lists-in-Environment-Diagrams"><a href="#Lists-in-Environment-Diagrams" class="headerlink" title="Lists in Environment Diagrams"></a>Lists in Environment Diagrams</h3><h6 id="对比append和extend"><a href="#对比append和extend" class="headerlink" title="对比append和extend"></a>对比append和extend</h6><p>对于append，是把s的末尾指向了t</p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105145800510.png" alt="image-20221105145800510"></p>
<p>而对于extend，是在s末尾增加了t的元素，修改t并不会改变s</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105145942501.png" alt="image-20221105145942501" style="zoom:67%;" />



<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105150001897.png" alt="image-20221105150001897" style="zoom:67%;" />

<h6 id="addtion-amp-slicing"><a href="#addtion-amp-slicing" class="headerlink" title="addtion &amp; slicing"></a>addtion &amp; slicing</h6><p><code>a = s + [t]</code>:新建了一个list指向t</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105150149404.png" alt="image-20221105150149404" style="zoom:67%;" />

<p>然后把s和这个新建的list加起来</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105150623586.png" alt="image-20221105150623586" style="zoom:67%;" />

<p>而实际上,新建的那个list是临时创建 ,reach不到的,为了好表达,就变成了上面这幅图了.</p>
<p><code>b = a[1:]</code>:看看b长啥样,后面长得和a一样</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105150801265.png" alt="image-20221105150801265" style="zoom:67%;" />

<p><code>a[1] = 9 </code></p>
<p><code>b[1][1] = 0</code></p>
<p>看看<code>b[1][1]</code>是哪个:<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105150929656.png" alt="image-20221105150929656" style="zoom:67%;" /></p>
<p>ei!t也被改了.</p>
<h6 id="The-list-function"><a href="#The-list-function" class="headerlink" title="The list function"></a>The list function</h6><p>creates a new  list containing  existing elements</p>
<p><code>t = list(s)</code></p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105151747106.png" alt="image-20221105151747106" style="zoom:67%;" />

<h6 id="slice-assignment"><a href="#slice-assignment" class="headerlink" title="slice assignment"></a>slice assignment</h6><p>replaces a slice with  new values</p>
<p><code>s[0:0] = t</code></p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105151942789.png" alt="image-20221105151942789" style="zoom:67%;" />

<p><code>s[3:] = t</code></p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105152021481.png" alt="image-20221105152021481" style="zoom:80%;" />

<h6 id="others"><a href="#others" class="headerlink" title="others"></a>others</h6><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105152226392.png" alt="image-20221105152226392" style="zoom:80%;" />

<h6 id="Lists-in-Lists-in-Lists-in-Environment-Diagrams"><a href="#Lists-in-Lists-in-Lists-in-Environment-Diagrams" class="headerlink" title="Lists in Lists in Lists in Environment Diagrams"></a>Lists in Lists in Lists in Environment Diagrams</h6><p><code>t[1:3] = [t]</code>:先build一个list containing t</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105154244843.png" alt="image-20221105154244843" style="zoom:80%;" />

<p>然后replace:</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105154340326.png" alt="image-20221105154340326" style="zoom:67%;" />

<p><code>t.extend(t)</code></p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105154517582.png" alt="image-20221105154517582" style="zoom:67%;" />

<blockquote>
<p>???为什么</p>
</blockquote>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105154700475.png" alt="image-20221105154700475"></p>
<p>而append是把t[1:2]当成一个list元素加进去</p>
<h2 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h2><ul>
<li>Instance attributes are found before class attributes; </li>
<li>class attributes are inherited</li>
</ul>
<p>eg:land owners</p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105163338850.png" alt="image-20221105163338850"></p>
<p>注意这个<code>jack.greeting = ‘Maam’</code>先找了jack instance里的,但是没有,尽管如此</p>
<p>然后往jack这个instance里加了greeting,而不是修改了类的greeting</p>
<blockquote>
<p>就是说,jack自己改了自己的,当然不能连所有人的一起改喽.</p>
</blockquote>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105164219995.png" alt="image-20221105164219995" style="zoom:80%;" />

<p>第二个是有‘’的</p>
<p><code>john.elf</code>似乎是指他的父亲(继承的class)</p>
<h2 id="Iterables-amp-Iterators"><a href="#Iterables-amp-Iterators" class="headerlink" title="Iterables &amp; Iterators"></a>Iterables &amp; Iterators</h2><p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105164659711.png" alt="image-20221105164659711"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">min_abs_indices</span>(<span class="params">s</span>):</span><br><span class="line">    <span class="comment">#我的:</span></span><br><span class="line">    <span class="comment">#return [i for i in range(len(s)) if abs(s[i]) == abs(min(s, key=abs))]</span></span><br><span class="line">    <span class="comment">#老师的:</span></span><br><span class="line">    min_abs = <span class="built_in">min</span>(<span class="built_in">map</span>(<span class="built_in">abs</span>, s))</span><br><span class="line">    <span class="keyword">return</span> [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s)) <span class="keyword">if</span> <span class="built_in">abs</span>(s[i]) == min_abs]</span><br></pre></td></tr></table></figure>

<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105164710509.png" alt="image-20221105164710509"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">largest_adj_sum</span>(<span class="params">s</span>):</span><br><span class="line">    <span class="comment">#我的(和老师说的第一种方法一样👍)</span></span><br><span class="line">    <span class="comment">#return max([s[i] + s[i + 1] for i in range(len(s) - 1)])</span></span><br><span class="line">    <span class="comment">#第二种方法</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(i + j <span class="keyword">for</span> i, j <span class="keyword">in</span> <span class="built_in">zip</span>(s[:-<span class="number">1</span>], s[<span class="number">1</span>:]))<span class="comment">#和老师一样捏</span></span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105164812217.png" alt="image-20221105164812217"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">digit_dict</span>(<span class="params">s</span>):</span><br><span class="line">    <span class="comment">#mine</span></span><br><span class="line">    <span class="keyword">return</span> &#123;x: [y <span class="keyword">for</span> y <span class="keyword">in</span> s <span class="keyword">if</span> x == y % <span class="number">10</span>] </span><br><span class="line">            <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">map</span>(<span class="keyword">lambda</span> x: x % <span class="number">10</span>, s)&#125;</span><br><span class="line">	<span class="comment">#instructor</span></span><br><span class="line">    <span class="keyword">return</span> &#123;d: [x <span class="keyword">for</span> x <span class="keyword">in</span> s <span class="keyword">if</span> x % <span class="number">10</span> == d] <span class="keyword">for</span> d <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) <span class="keyword">if</span> <span class="built_in">any</span>([x % <span class="number">10</span> == d <span class="keyword">for</span> x <span class="keyword">in</span> s])&#125;</span><br></pre></td></tr></table></figure>

<p>这个any,以及dict的built-in function是新接触到的用法</p>
<p>any:后面的列表里有一个true就返回true</p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105165105276.png" alt="image-20221105165105276"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">all_have_an_equal</span>(<span class="params">s</span>):</span><br><span class="line">    <span class="comment">#这种方法不行,因为它表示要全部元素相等</span></span><br><span class="line">    <span class="comment">#return all([x == y for x in s y in s])</span></span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">all</span>([s[i] <span class="keyword">in</span> s[<span class="number">0</span>:i] + s[i+<span class="number">1</span>:] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s))])</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">min</span>([<span class="built_in">sum</span>([<span class="number">1</span> <span class="keyword">for</span> y <span class="keyword">in</span> s <span class="keyword">if</span> y == x]) <span class="keyword">for</span> x <span class="keyword">in</span> s]) &gt;= <span class="number">2</span></span><br></pre></td></tr></table></figure>



<h2 id="Linked-List"><a href="#Linked-List" class="headerlink" title="Linked List"></a>Linked List</h2><p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105202550676.png" alt="image-20221105202550676"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">ordered</span>(<span class="params">s</span>):</span><br><span class="line">    <span class="comment">#注:没说不能出现一个或者空的</span></span><br><span class="line">    <span class="keyword">if</span> s <span class="keyword">is</span> Link.empty <span class="keyword">or</span> s.rest <span class="keyword">is</span> Link.empty:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">all</span>(s.first &lt;= s.rest.first, ordered(s.rest))</span><br><span class="line">    <span class="comment">#我觉得我这个比老师的好^ ^</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#加上了key的版本</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">ordered</span>(<span class="params">s, key=<span class="keyword">lambda</span> x:x</span>):</span><br><span class="line">	<span class="keyword">if</span> s <span class="keyword">is</span> Link.empty <span class="keyword">or</span> s.rest <span class="keyword">is</span> Link.empty:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">all</span>(key(s.first) &lt;= key(s.rest.first), ordered(s.rest))</span><br></pre></td></tr></table></figure>

<p>老师的版本:</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105203231248.png" alt="image-20221105203231248" style="zoom:67%;" />

<p>其实这个递归的return不需要用and,只要递归的时候有false就会return了,如果没有false就一直到base case,然后return true</p>
<p>所以老师的版本还利用了base case</p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221105204203097.png" alt="image-20221105204203097"></p>
<p>自己这个写的着实不行,可能是想复杂了.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">merge_in_place</span>(<span class="params">s, t</span>):</span><br><span class="line">    <span class="keyword">if</span> t == Link.empty:</span><br><span class="line">        <span class="keyword">return</span> s</span><br><span class="line">    <span class="keyword">elif</span> s.rest == Link.empty:</span><br><span class="line">        <span class="keyword">if</span> s.first &lt; t.first:</span><br><span class="line">            s.rest = t</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            s.rest = Link(s.first)</span><br><span class="line">            s.first = t.first</span><br><span class="line">        <span class="keyword">return</span> s</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        s2 = s</span><br><span class="line">        <span class="keyword">while</span>(s2.rest.first &lt; t.first):</span><br><span class="line">            s2 = s2.rest</span><br><span class="line">        s_re = s2.rest</span><br><span class="line">        s2.rest = t</span><br><span class="line">        s2.rest.rest = s_re</span><br><span class="line">        <span class="keyword">return</span> merge_in_place(s, t.rest)</span><br></pre></td></tr></table></figure>

<p>还是学一下老师的吧:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">merge</span>(<span class="params">s, t</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return a sorted Link containing the elements of sorted s &amp; t.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; a = Link(1, Link(5))</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; b = Link(1, Link(4))</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; merge(a, b)</span></span><br><span class="line"><span class="string">    Link(1, Link(1, Link(4, Link(5))))</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; a</span></span><br><span class="line"><span class="string">    Link(1, Link(5))</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; b</span></span><br><span class="line"><span class="string">    Link(1, Link(4))</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> s <span class="keyword">is</span> Link.empty:</span><br><span class="line">        <span class="keyword">return</span> t</span><br><span class="line">    <span class="keyword">elif</span> t <span class="keyword">is</span> Link.empty:</span><br><span class="line">        <span class="keyword">return</span> s</span><br><span class="line">    <span class="keyword">elif</span> s.first &lt;= t.first:</span><br><span class="line">        <span class="keyword">return</span> Link(s.first, merge(s.rest, t))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> Link(t.first, merge(s, t.rest))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">merge_in_place</span>(<span class="params">s, t</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return a sorted Link containing the elements of sorted s &amp; t.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; a = Link(1, Link(5))</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; b = Link(1, Link(4))</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; merge_in_place(a, b)</span></span><br><span class="line"><span class="string">    Link(1, Link(1, Link(4, Link(5))))</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; a</span></span><br><span class="line"><span class="string">    Link(1, Link(1, Link(4, Link(5))))</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; b</span></span><br><span class="line"><span class="string">    Link(1, Link(4, Link(5)))#因为t那里不包含等于,所以t乐意当作是去重</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> s <span class="keyword">is</span> Link.empty:</span><br><span class="line">        <span class="keyword">return</span> t</span><br><span class="line">    <span class="keyword">elif</span> t <span class="keyword">is</span> Link.empty:</span><br><span class="line">        <span class="keyword">return</span> s</span><br><span class="line">    <span class="keyword">elif</span> s.first &lt;= t.first:</span><br><span class="line">        s.rest = merge_in_place(s.rest, t)</span><br><span class="line">        <span class="keyword">return</span> s</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        t.rest = merge_in_place(s, t.rest)</span><br><span class="line">        <span class="keyword">return</span> t</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/18/CS61A/24-data%20examples/" data-id="cld15jd1q000tggpgddlw9kop" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Computer-Sciense/" rel="tag">Computer Sciense</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-CS61A/23-decomposition" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/08/17/CS61A/23-decomposition/" class="article-date">
  <time datetime="2022-08-17T03:33:24.000Z" itemprop="datePublished">2022-08-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CS61A/">CS61A</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/17/CS61A/23-decomposition/">CS61A-23-decomposision</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="Python-modules"><a href="#Python-modules" class="headerlink" title="Python modules"></a>Python modules</h2><p>A <a target="_blank" rel="noopener" href="https://docs.python.org/3/tutorial/modules.html">Python module</a> is a file typically containing function or class definitions.</p>
<p>import的方式有三种:</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221104205050758.png" alt="image-20221104205050758" style="zoom: 50%;" />

<p>with alias:<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221104205149284.png" alt="image-20221104205149284" style="zoom: 50%;" /></p>
<h5 id="run-a-module"><a href="#run-a-module" class="headerlink" title="run a module"></a>run a module</h5><p>This command runs a module:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">📄python module.py</span><br></pre></td></tr></table></figure>

<p>When run like that, Python sets a global variable <code>__name__</code> to “main”.</p>
<p> you often see code at the bottom of modules like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">📄if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # use the code in the module somehow</span><br></pre></td></tr></table></figure>

<p>The code <strong>inside that condition will be executed as well</strong></p>
<h2 id="Packages"><a href="#Packages" class="headerlink" title="Packages"></a>Packages</h2><p>A <a target="_blank" rel="noopener" href="https://docs.python.org/3/tutorial/modules.html#packages">Python package</a> is a way of bundling multiple related modules together. </p>
<p>Popular packages are NumPy and Pillow.</p>
<p>import方式:<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221104205425035.png" alt="image-20221104205425035" style="zoom: 50%;" /></p>
<p><code>pip</code> is the standard way to install package</p>
<h2 id="Modular-Design"><a href="#Modular-Design" class="headerlink" title="Modular Design"></a>Modular Design</h2><p>Ways to isolate in Python:</p>
<ul>
<li>Functions</li>
<li>Classes</li>
<li>Modules</li>
<li>Packages</li>
</ul>
<p><strong>Separation of Concerns</strong></p>
<ul>
<li> Isolate different parts of a program that address different concerns</li>
<li>A modular component can be <strong>developed and tested independently</strong></li>
</ul>
<p>互相不用知道对方怎么实现的，separate了</p>
<img src="C:/Users/Liu%20Junxin/AppData/Roaming/Typora/typora-user-images/image-20221104143458938.png" alt="image-20221104143458938" style="zoom:67%;" />

<p>并且，修改一个part的时候，不需要修改别的part</p>
<h5 id="eg：restaurant"><a href="#eg：restaurant" class="headerlink" title="eg：restaurant"></a>eg：restaurant</h5><p>data长这样：<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221104143815957.png" alt="image-20221104143815957" style="zoom: 67%;" /></p>
<p>有餐馆信息,user review信息</p>
<blockquote>
<p>user_id:不是给联系方式啥的,而是indicate是不是同个user写了不同的评论之类.</p>
</blockquote>
<p>现在要写一个程序能“ look up a restaurant by name and show related restaurants “</p>
<h6 id="search"><a href="#search" class="headerlink" title="search"></a>search</h6><p>我们不知道all_restaurants是什么,但是可以先把逻辑写出来,之后再来修改它:</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221104205734421.png" alt="image-20221104205734421" style="zoom:67%;" />

<p>因为ranking是正序的,所以stars取负值,这样前面的就是stars最多的</p>
<p>当现在implement有点困难的时候,最好的方法是先写个docstring:</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221104210120737.png" alt="image-20221104210120737" style="zoom: 67%;" />

<p>下面来完成这个simiilar把!</p>
<h6 id="similar"><a href="#similar" class="headerlink" title="similar"></a>similar</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sorted</span>(iterable, /, *, key=<span class="literal">None</span>, reverse=<span class="literal">False</span>)</span><br><span class="line"> Return a new <span class="built_in">list</span> containing <span class="built_in">all</span> items <span class="keyword">from</span> the iterable <span class="keyword">in</span> ascending order.</span><br><span class="line"> A custom key function can be supplied to customize the sort order, <span class="keyword">and</span> the reverse flag can be <span class="built_in">set</span> to request the result <span class="keyword">in</span> descending order.</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">similar</span>(<span class="params">self, k, similarity=num_shared_reviewers</span>):</span><br><span class="line">        <span class="string">&quot;Return the K most similar restaurants to SELF, using SIMILARITY for comparison.&quot;</span></span><br><span class="line">        others = <span class="built_in">list</span>(Restaurant.<span class="built_in">all</span>)</span><br><span class="line">        others.remove(self)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sorted</span>(others, key= <span class="keyword">lambda</span> k:-similarity(self, k) )[:k]</span><br></pre></td></tr></table></figure>

<h6 id="reading-files"><a href="#reading-files" class="headerlink" title="reading files"></a>reading files</h6><p>用python的json包来处理（就是变成了字典）</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221104212321026.png" alt="image-20221104212321026" style="zoom:80%;" />

<h6 id="Set-Intersection"><a href="#Set-Intersection" class="headerlink" title="Set Intersection"></a>Set Intersection</h6><p>之前的similarity search太费时间了,因此改成linear time的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fast_overlap</span>(<span class="params">s, t</span>): </span><br><span class="line"> <span class="string">&quot;&quot;&quot;Return the overlap between sorted S and sorted T. </span></span><br><span class="line"><span class="string"> &gt;&gt;&gt; fast_overlap([3, 4, 6, 7, 9, 10], [1, 3, 5, 7, 8]) </span></span><br><span class="line"><span class="string"> 2 </span></span><br><span class="line"><span class="string"> &quot;&quot;&quot;</span> </span><br><span class="line"> 	i, j, count = <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line"> 	<span class="keyword">while</span> i &lt; <span class="built_in">len</span>(s) <span class="keyword">and</span> j &lt; <span class="built_in">len</span>(t):</span><br><span class="line">        <span class="keyword">if</span> s[i] == t[j]:</span><br><span class="line">            count, i, j = count + <span class="number">1</span>, i + <span class="number">1</span>, j + <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> s[i] &lt; t[j]:</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span>:</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> count</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/17/CS61A/23-decomposition/" data-id="cld15jd1p000qggpggvjx6h37" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Computer-Sciense/" rel="tag">Computer Sciense</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-CS61A/21-recursive objects&amp;hw6 &amp;lab8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/08/15/CS61A/21-recursive%20objects&hw6%20&lab8/" class="article-date">
  <time datetime="2022-08-15T03:33:24.000Z" itemprop="datePublished">2022-08-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CS61A/">CS61A</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/15/CS61A/21-recursive%20objects&hw6%20&lab8/">CS61A-21-recursive objects</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="Linked-lists"><a href="#Linked-lists" class="headerlink" title="Linked lists"></a>Linked lists</h2><h4 id="concept"><a href="#concept" class="headerlink" title="concept"></a>concept</h4><p>linked list structure is:</p>
<ul>
<li>empty</li>
<li>a first value and the rest of the linked list</li>
</ul>
<img src="C:/Users/Liu%20Junxin/AppData/Roaming/Typora/typora-user-images/image-20221031155609930.png" alt="image-20221031155609930" style="zoom:67%;" />

<ul>
<li><p>The first (zeroth)  element is an  attribute value</p>
</li>
<li><p>The rest of the  elements are stored  in a linked list</p>
</li>
<li><p>link.empty is a class attribute represents  an empty linked list</p>
</li>
</ul>
<p><code>Link(3, Link(4, Link(5, Link.empty)))</code></p>
<blockquote>
<p>有点像tree呢</p>
</blockquote>
<p>也可以这样表示：<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221031155933124.png" alt="image-20221031155933124" style="zoom:67%;" /></p>
<p><strong>implement the class</strong>：</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221031160350686.png" alt="image-20221031160350686" style="zoom: 67%;" />

<p><code>help(isinstance)</code>: Return whether an object is an instance of a class or of a subclass thereof.</p>
<p>使用eg:</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221031160652964.png" alt="image-20221031160652964" style="zoom: 80%;" />

<h4 id="Processing"><a href="#Processing" class="headerlink" title="Processing"></a>Processing</h4><p>和<code>iterator</code>处理的结合使用</p>
<p>搞清楚linklist的递归特征就很好写了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">range_link</span>(<span class="params">start, end</span>): </span><br><span class="line">     <span class="string">&quot;&quot;&quot;Return a Link containing consecutive integers from start to end.</span></span><br><span class="line"><span class="string">     &gt;&gt;&gt; range_link(3, 6)</span></span><br><span class="line"><span class="string">     Link(3, Link(4, Link(5)))</span></span><br><span class="line"><span class="string">     &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> start &gt;= end:</span><br><span class="line">            <span class="keyword">return</span> Link.empty</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> Link(start, range_link(start + <span class="number">1</span>, end))</span><br><span class="line">                </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">map_link</span>(<span class="params">f, s</span>): </span><br><span class="line">     <span class="string">&quot;&quot;&quot;Return a Link that contains f(x) for each x in Link s.</span></span><br><span class="line"><span class="string">     &gt;&gt;&gt; map_link(square, range_link(3, 6))</span></span><br><span class="line"><span class="string">     Link(9, Link(16, Link(25)))</span></span><br><span class="line"><span class="string">     &quot;&quot;&quot;</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;if len(s) &lt;= 0:</span></span><br><span class="line"><span class="string">            return Link.empty</span></span><br><span class="line"><span class="string">        else:</span></span><br><span class="line"><span class="string">            return Link(f(s[0]), map_link(f, s[1:]))&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment">#注意s是一个link</span></span><br><span class="line">        <span class="comment">#老师的:</span></span><br><span class="line">        <span class="keyword">if</span> s <span class="keyword">is</span> Link.empty:</span><br><span class="line">            <span class="keyword">return</span> s</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> Link(f(s.first), map_link(f, s.rest))</span><br><span class="line">        </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">filter_link</span>(<span class="params">f, s</span>): </span><br><span class="line">     <span class="string">&quot;&quot;&quot;Return a Link that contains only the elements x of Link s for which f(x) is a true value.</span></span><br><span class="line"><span class="string">     &gt;&gt;&gt; filter_link(odd, range_link(3, 6))</span></span><br><span class="line"><span class="string">     Link(3, Link(5))</span></span><br><span class="line"><span class="string">     &quot;&quot;&quot;</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;is s is Link.empty:</span></span><br><span class="line"><span class="string">            return s</span></span><br><span class="line"><span class="string">        else:</span></span><br><span class="line"><span class="string">            if f(s.first):</span></span><br><span class="line"><span class="string">                return Link(s.first, filter_link(s.rest))</span></span><br><span class="line"><span class="string">            else:</span></span><br><span class="line"><span class="string">                return filter_link(s.rest)&quot;&quot;&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">#老师的:差不多</span></span><br><span class="line">        <span class="keyword">is</span> s <span class="keyword">is</span> Link.empty:</span><br><span class="line">            <span class="keyword">return</span> s</span><br><span class="line">        filtered_rest = filter_link(f, s.rest)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> f(s.first):</span><br><span class="line">                <span class="keyword">return</span> Link(s.first, filtered_rest)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> filtered_rest</span><br><span class="line">        </span><br></pre></td></tr></table></figure>

<h4 id="Mutation"><a href="#Mutation" class="headerlink" title="Mutation"></a>Mutation</h4><p>The rest of a linked list can contain the linked list as a sub-list</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221031163343755.png" alt="image-20221031163343755" style="zoom:67%;" />

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221031163410492.png" alt="image-20221031163410492" style="zoom: 67%;" />

<blockquote>
<p>注意:对于任何object来说的<code>=</code>(list什么的也算)都表示是指向同一个变量,而不是两个内容一样的变量.</p>
</blockquote>
<h6 id="eg"><a href="#eg" class="headerlink" title="eg"></a>eg</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">s, v</span>):</span><br><span class="line">     <span class="string">&quot;&quot;&quot;Add v to an ordered list s with no repeats, returning modified s.</span></span><br><span class="line"><span class="string">	(Note: If v is already in s, then don&#x27;t modify s, but still return it.)&quot;&quot;&quot;</span></span><br><span class="line">	<span class="comment">#自己</span></span><br><span class="line">    <span class="keyword">assert</span> s <span class="keyword">is</span> <span class="keyword">not</span> <span class="type">List</span>.empty</span><br><span class="line">    <span class="keyword">if</span> s.first &gt; v:</span><br><span class="line">        s.first, s.rest = v, Link(s.first, s.rest)</span><br><span class="line">    <span class="keyword">elif</span> s.first &lt; v <span class="keyword">and</span> empty(s.rest):</span><br><span class="line">        s.rest = Link(v)</span><br><span class="line">    <span class="keyword">elif</span> s.first &lt; v:</span><br><span class="line">        <span class="keyword">return</span> Link(s.first, add(s.rest, v))</span><br><span class="line">    <span class="comment">#s.first == v or 以上操作完成</span></span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#答案差不多</span></span><br><span class="line">   </span><br></pre></td></tr></table></figure>

<h2 id="Tree-class"><a href="#Tree-class" class="headerlink" title="Tree class"></a>Tree class</h2><p>与linklist的区别:tree可以有很多branches</p>
<ul>
<li>Each location in a tree is called a node</li>
<li>Each node has a label that can be any value</li>
<li>The top node is the root node</li>
</ul>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221031174727317.png" alt="image-20221031174727317" style="zoom:67%;" />

<p><strong>implement class tree:</strong></p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221031174919411.png" alt="image-20221031174919411" style="zoom:80%;" />

<p>为了print和显示,需要Implement repr和str</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Trees</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tree</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;A tree is a label and a list of branches.&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, label, branches=[]</span>):</span><br><span class="line">        self.label = label</span><br><span class="line">        <span class="keyword">for</span> branch <span class="keyword">in</span> branches:</span><br><span class="line">            <span class="keyword">assert</span> <span class="built_in">isinstance</span>(branch, Tree)</span><br><span class="line">        self.branches = <span class="built_in">list</span>(branches)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> self.branches:</span><br><span class="line">            branch_str = <span class="string">&#x27;, &#x27;</span> + <span class="built_in">repr</span>(self.branches)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            branch_str = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Tree(&#123;0&#125;&#123;1&#125;)&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">repr</span>(self.label), branch_str)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;\n&#x27;</span>.join(self.indented())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">indented</span>(<span class="params">self</span>):</span><br><span class="line">        lines = []</span><br><span class="line">        <span class="keyword">for</span> b <span class="keyword">in</span> self.branches:</span><br><span class="line">            <span class="keyword">for</span> line <span class="keyword">in</span> b.indented():</span><br><span class="line">                lines.append(<span class="string">&#x27;  &#x27;</span> + line)</span><br><span class="line">        <span class="keyword">return</span> [<span class="built_in">str</span>(self.label)] + lines</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">is_leaf</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">not</span> self.branches</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fib_tree</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;A Fibonacci tree.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; print(fib_tree(4))</span></span><br><span class="line"><span class="string">    3</span></span><br><span class="line"><span class="string">      1</span></span><br><span class="line"><span class="string">        0</span></span><br><span class="line"><span class="string">        1</span></span><br><span class="line"><span class="string">      2</span></span><br><span class="line"><span class="string">        1</span></span><br><span class="line"><span class="string">        1</span></span><br><span class="line"><span class="string">          0</span></span><br><span class="line"><span class="string">          1</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span> <span class="keyword">or</span> n == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> Tree(n)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        left = fib_tree(n-<span class="number">2</span>)</span><br><span class="line">        right = fib_tree(n-<span class="number">1</span>)</span><br><span class="line">        fib_n = left.label + right.label</span><br><span class="line">        <span class="keyword">return</span> Tree(fib_n, [left, right])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">leaves</span>(<span class="params">tree</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return the leaf values of a tree.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; leaves(fib_tree(4))</span></span><br><span class="line"><span class="string">    [0, 1, 1, 0, 1]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> t.is_leaf():</span><br><span class="line">        <span class="keyword">return</span> [t.label]</span><br><span class="line">    leaves_lst = []</span><br><span class="line">    <span class="keyword">for</span> branch <span class="keyword">in</span> t.branches:</span><br><span class="line">        <span class="comment">#leaves_lst.append(leaves(branch))</span></span><br><span class="line">        leaves_lst.extend(leaves(branch))</span><br><span class="line">    <span class="keyword">return</span> leaves_lst</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">height</span>(<span class="params">tree</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;The height of a tree.&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> tree.is_leaf():</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>  <span class="comment">#注意不是1，好像是少一层吧</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> + <span class="built_in">max</span>([height(b) <span class="keyword">for</span> b <span class="keyword">in</span> tree.branches])<span class="comment">#嗯！很好！</span></span><br><span class="line">            </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>关于extend和append的区别：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/342816972">python中append()和extend()区别详解 - 知乎 (zhihu.com)</a></p>
<p>**extend()**向列表尾部追加一个列表，将列表中的每个元素都追加进来，在原有列表上增加。而append是把后面的那整个内容挡车工一个元素加进来</p>
<h5 id="tree-mutation"><a href="#tree-mutation" class="headerlink" title="tree mutation"></a>tree mutation</h5><p>Removing subtrees from a  tree is called pruning </p>
<p>Prune branches before  recursive processing</p>
<p>来implement吧！</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">def prune(t, n):</span><br><span class="line">    &quot;&quot;&quot;Prune sub-trees whose label value is n.</span><br><span class="line"></span><br><span class="line">    &gt;&gt;&gt; t = fib_tree(5)</span><br><span class="line">    &gt;&gt;&gt; prune(t, 1)</span><br><span class="line">    &gt;&gt;&gt; print(t)</span><br><span class="line">    5</span><br><span class="line">      2</span><br><span class="line">      3</span><br><span class="line">        2</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    t.branches = [b for b in t.branches if b.label != n]</span><br><span class="line">    for b in t.branches:</span><br><span class="line">        prune(b, n)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="HW-06"><a href="#HW-06" class="headerlink" title="HW 06"></a>HW 06</h2><h5 id="1-vending-machine"><a href="#1-vending-machine" class="headerlink" title="1 vending machine"></a>1 vending machine</h5><p>注意这个打印出来的东西有‘’，说明这不是print，这是返回值</p>
<p>attributs放哪里？class里放这个类共有的东西，self里放这个instance个人的东西</p>
<h5 id="3-store-digits"><a href="#3-store-digits" class="headerlink" title="3 store digits"></a>3 store digits</h5><p>注意它的数字顺序是倒着的。</p>
<p>还有注意要加在最后一个rest上</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">store_digits</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Stores the digits of a positive number n in a linked list.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; s = store_digits(1)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; s</span></span><br><span class="line"><span class="string">    Link(1)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; store_digits(2345)</span></span><br><span class="line"><span class="string">    Link(2, Link(3, Link(4, Link(5))))</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; store_digits(876)</span></span><br><span class="line"><span class="string">    Link(8, Link(7, Link(6)))</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; # a check for restricted functions</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; import inspect, re</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; cleaned = re.sub(r&quot;#.*\\n&quot;, &#x27;&#x27;, re.sub(r&#x27;&quot;&#123;3&#125;[\s\S]*?&quot;&#123;3&#125;&#x27;, &#x27;&#x27;, inspect.getsource(store_digits)))</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; print(&quot;Do not use str or reversed!&quot;) if any([r in cleaned for r in [&quot;str&quot;, &quot;reversed&quot;]]) else None</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; link1 = Link(3, Link(Link(4), Link(5, Link(6))))</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    div, res = n // <span class="number">10</span>, n % <span class="number">10</span></span><br><span class="line">    <span class="keyword">if</span> div == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> Link(res)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment">#return Link(res, store_digits(div))注意顺序</span></span><br><span class="line">        head = store_digits(div)</span><br><span class="line">        tail = head</span><br><span class="line">        <span class="comment">#l.rest = Link(res) 应该是要找到最后一个rest才对</span></span><br><span class="line">        <span class="keyword">while</span> tail.rest != Link.empty:</span><br><span class="line">            tail = tail.rest</span><br><span class="line">        tail.rest = Link(res)</span><br><span class="line">        <span class="keyword">return</span> head</span><br></pre></td></tr></table></figure>

<h5 id="5-Two-list"><a href="#5-Two-list" class="headerlink" title="5 Two list"></a>5 Two list</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">two_list</span>(<span class="params">vals, amounts</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Returns a linked list according to the two lists that were passed in. Assume</span></span><br><span class="line"><span class="string">    vals and amounts are the same size. Elements in vals represent the value, and the</span></span><br><span class="line"><span class="string">    corresponding element in amounts represents the number of this value desired in the</span></span><br><span class="line"><span class="string">    final linked list. Assume all elements in amounts are greater than 0. Assume both</span></span><br><span class="line"><span class="string">    lists have at least one element.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; a = [1, 3, 2]</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; b = [1, 1, 1]</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; c = two_list(a, b)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; c</span></span><br><span class="line"><span class="string">    Link(1, Link(3, Link(2)))</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; a = [1, 3, 2]</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; b = [2, 2, 1]</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; c = two_list(a, b)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; c</span></span><br><span class="line"><span class="string">    Link(1, Link(1, Link(3, Link(3, Link(2)))))</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    l = Link(vals[<span class="number">0</span>])<span class="comment">#因为初始化一定要first...</span></span><br><span class="line">    t = l</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> val <span class="keyword">in</span> vals:</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(amounts[i]):</span><br><span class="line">            t.rest= Link(val)</span><br><span class="line">            t = t.rest</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> l.rest  <span class="comment">#等于把第一个元素多做了一次，在这里圆回来   </span></span><br></pre></td></tr></table></figure>

<p>或者：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vals.reverse()</span><br><span class="line">amounts.reverse()</span><br><span class="line">result = Link.empty</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(vals)):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(amounts[i]):</span><br><span class="line">        result = Link(vals[i], result)</span><br><span class="line"><span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>

<h2 id="Lab-8"><a href="#Lab-8" class="headerlink" title="Lab 8"></a>Lab 8</h2><p>初始化link的时候必须要有一个参数作为first</p>
<p>但是rest可以是empty</p>
<h5 id="Q4"><a href="#Q4" class="headerlink" title="Q4"></a>Q4</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">label_squarer</span>(<span class="params">t</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Mutates a Tree t by squaring all its elements.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; t = Tree(1, [Tree(3, [Tree(5)]), Tree(7)])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; label_squarer(t)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; t</span></span><br><span class="line"><span class="string">    Tree(1, [Tree(9, [Tree(25)]), Tree(49)])</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="comment">#错误解法：不应该有返回值，而是在原树上修改</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    if t.is_leaf():</span></span><br><span class="line"><span class="string">      return Tree(t.label**2)</span></span><br><span class="line"><span class="string">    else:</span></span><br><span class="line"><span class="string">      return Tree(t.label**2, [label_squarer(b) for b in t.branches])&quot;&quot;&quot;</span></span><br><span class="line">    t.label *= t.label</span><br><span class="line">    <span class="keyword">if</span> t.is_leaf():</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">      <span class="keyword">for</span> b <span class="keyword">in</span> t.branches:</span><br><span class="line">        label_squarer(b)</span><br></pre></td></tr></table></figure>

<p>看注释部分写的</p>
<h5 id="Q5"><a href="#Q5" class="headerlink" title="Q5"></a>Q5</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">cumulative_mul</span>(<span class="params">t</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Mutates t so that each node&#x27;s label becomes the product of all labels in</span></span><br><span class="line"><span class="string">    the corresponding subtree rooted at t.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; t = Tree(1, [Tree(3, [Tree(5)]), Tree(7)])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; cumulative_mul(t)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; t</span></span><br><span class="line"><span class="string">    Tree(105, [Tree(15, [Tree(5)]), Tree(7)])</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="comment">#观察发现是原始节点数据的累乘，而不是修改过的，所以应该从辈份最高的开始，</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">mul</span>(<span class="params">t</span>):</span><br><span class="line">      <span class="keyword">if</span> t.is_leaf():</span><br><span class="line">        <span class="keyword">return</span> t.label</span><br><span class="line">      <span class="keyword">else</span>:</span><br><span class="line">        num = t.label</span><br><span class="line">        <span class="keyword">for</span> b <span class="keyword">in</span> t.branches:</span><br><span class="line">          num *= mul(b)</span><br><span class="line">        <span class="keyword">return</span> num</span><br><span class="line">      </span><br><span class="line">    t.label = mul(t)</span><br><span class="line">    <span class="keyword">if</span> t.is_leaf():</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">      <span class="keyword">for</span> b <span class="keyword">in</span> t.branches:</span><br><span class="line">        b.label = mul(b)</span><br></pre></td></tr></table></figure>

<p>注意一下python的变量全都是指针，全是对象，所以会被修改</p>
<p>不过数值型对象会有点不一样</p>
<h5 id="Q6"><a href="#Q6" class="headerlink" title="Q6"></a>Q6</h5><p>看我写的注释</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add_d_leaves</span>(<span class="params">t, v</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Add d leaves containing v to each node at every depth d.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; t_one_to_four = Tree(1, [Tree(2), Tree(3, [Tree(4)])])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; print(t_one_to_four)</span></span><br><span class="line"><span class="string">    1</span></span><br><span class="line"><span class="string">      2</span></span><br><span class="line"><span class="string">      3</span></span><br><span class="line"><span class="string">        4</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; add_d_leaves(t_one_to_four, 5)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; print(t_one_to_four)</span></span><br><span class="line"><span class="string">    1</span></span><br><span class="line"><span class="string">      2</span></span><br><span class="line"><span class="string">        5</span></span><br><span class="line"><span class="string">      3</span></span><br><span class="line"><span class="string">        4</span></span><br><span class="line"><span class="string">          5</span></span><br><span class="line"><span class="string">          5</span></span><br><span class="line"><span class="string">        5</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; t1 = Tree(1, [Tree(3)])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; add_d_leaves(t1, 4)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; t1</span></span><br><span class="line"><span class="string">    Tree(1, [Tree(3, [Tree(4)])])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; t2 = Tree(2, [Tree(5), Tree(6)])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; t3 = Tree(3, [t1, Tree(0), t2])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; print(t3)</span></span><br><span class="line"><span class="string">    3</span></span><br><span class="line"><span class="string">      1</span></span><br><span class="line"><span class="string">        3</span></span><br><span class="line"><span class="string">          4</span></span><br><span class="line"><span class="string">      0</span></span><br><span class="line"><span class="string">      2</span></span><br><span class="line"><span class="string">        5</span></span><br><span class="line"><span class="string">        6</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; add_d_leaves(t3, 10)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; print(t3)</span></span><br><span class="line"><span class="string">    3</span></span><br><span class="line"><span class="string">      1</span></span><br><span class="line"><span class="string">        3</span></span><br><span class="line"><span class="string">          4</span></span><br><span class="line"><span class="string">            10</span></span><br><span class="line"><span class="string">            10</span></span><br><span class="line"><span class="string">            10</span></span><br><span class="line"><span class="string">          10</span></span><br><span class="line"><span class="string">          10</span></span><br><span class="line"><span class="string">        10</span></span><br><span class="line"><span class="string">      0</span></span><br><span class="line"><span class="string">        10</span></span><br><span class="line"><span class="string">      2</span></span><br><span class="line"><span class="string">        5</span></span><br><span class="line"><span class="string">          10</span></span><br><span class="line"><span class="string">          10</span></span><br><span class="line"><span class="string">        6</span></span><br><span class="line"><span class="string">          10</span></span><br><span class="line"><span class="string">          10</span></span><br><span class="line"><span class="string">        10</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">addl</span>(<span class="params">t, v, d</span>):</span><br><span class="line">      <span class="string">&quot;&quot;&quot;for _ in range(d + 1):</span></span><br><span class="line"><span class="string">          t.branches.append(Tree(v))&quot;&quot;&quot;</span><span class="comment">#不可以噢，因为放在这里等于说源源不断输入leaf然后新来的leaf也加leaf，所以要把增加的操作放在递归后面</span></span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">not</span> t.is_leaf():</span><br><span class="line">        <span class="keyword">for</span> b <span class="keyword">in</span> t.branches:</span><br><span class="line">          addl(b, v, d + <span class="number">1</span>)</span><br><span class="line">      <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(d):</span><br><span class="line">          t.branches.append(Tree(v))</span><br><span class="line">    addl(t, v, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/15/CS61A/21-recursive%20objects&hw6%20&lab8/" data-id="cld15jd1n000kggpg1hbn3ryx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Computer-Sciense/" rel="tag">Computer Sciense</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-CS61A/20-representation &amp; disc07" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/08/14/CS61A/20-representation%20&%20disc07/" class="article-date">
  <time datetime="2022-08-14T03:33:24.000Z" itemprop="datePublished">2022-08-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CS61A/">CS61A</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/14/CS61A/20-representation%20&%20disc07/">CS61A-20-representation</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id=""><a href="#" class="headerlink" title=""></a></h2><h2 id="String-representations"><a href="#String-representations" class="headerlink" title="String representations"></a>String representations</h2><p>In Python, all objects produce two string representations: </p>
<ul>
<li> The <strong>str</strong> is legible to humans</li>
<li> The <strong>repr</strong> is legible to the Python interpreter</li>
</ul>
<blockquote>
<ul>
<li><code>str()</code> 的输出追求可读性，输出格式要便于理解，适合用于输出内容到用户终端。</li>
<li><code>repr()</code> 的输出追求明确性，除了对象内容，还需要展示出对象的数据类型信息，适合开发和调试阶段使用。</li>
</ul>
<p> all objects should produce two different string representations: </p>
<ul>
<li><p>one that is human-interpretable text </p>
</li>
<li><p>one that is a Python-interpretable expression</p>
</li>
</ul>
</blockquote>
<h5 id="repr"><a href="#repr" class="headerlink" title="repr"></a>repr</h5><blockquote>
<p>扩展：<a target="_blank" rel="noopener" href="https://www.runoob.com/python/python-func-repr.html">Python repr() 函数 | 菜鸟教程 (runoob.com)</a></p>
</blockquote>
<p><code>repr(object) -&gt; string</code></p>
<ul>
<li>Return the <strong>canonical string representation</strong> of the object.</li>
<li><code> eval(repr(object)) == object</code></li>
</ul>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221029182239064.png" alt="image-20221029182239064" style="zoom:67%;" />

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221029182251119.png" alt="image-20221029182251119" style="zoom:67%;" />

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221029184603794.png" alt="image-20221029184603794" style="zoom:80%;" />

<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221029184625059.png" alt="image-20221029184625059"></p>
<p>表明它告诉python,这是一个字符串</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221029184633284.png" alt="image-20221029184633284" style="zoom:80%;" />

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221029184645176.png" alt="image-20221029184645176" style="zoom:80%;" />

<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221029184651714.png" alt="image-20221029184651714"></p>
<h5 id="str"><a href="#str" class="headerlink" title="str"></a>str</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> fractions <span class="keyword">import</span> Fraction</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>half = Fraction(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">repr</span>(half)</span><br><span class="line"><span class="string">&#x27;Fraction(1, 2)&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">str</span>(half)</span><br><span class="line"><span class="string">&#x27;1/2&#x27;</span> <span class="comment">#对于human来说的</span></span><br></pre></td></tr></table></figure>

<p>The result of calling <strong>str</strong> on the value of an expression = what Python prints  using the <strong>print</strong> function</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221029183617613.png" alt="image-20221029183617613" style="zoom:67%;" />

<hr>
<p>更多例子:</p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030164905798.png" alt="image-20221030164905798"></p>
<h4 id="f-strings"><a href="#f-strings" class="headerlink" title="f-strings"></a>f-strings</h4><p>a string literal that contains expressions</p>
<p>string concatenation版：<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030162035435.png" alt="image-20221030162035435" style="zoom: 60%;" /></p>
<p>string interpolation版：<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030162244033.png" alt="image-20221030162244033" style="zoom:67%;" /></p>
<p><code>&#123;&#125;</code>里的会被当成python expression,打印expression的返回值(结果)</p>
<p>更多例子:</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030162353084.png" alt="image-20221030162353084" style="zoom:80%;" />

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030162435614.png" alt="image-20221030162435614" style="zoom:80%;" />

<h4 id="Polymorphic-Functions"><a href="#Polymorphic-Functions" class="headerlink" title="Polymorphic Functions"></a>Polymorphic Functions</h4><p>A function that applies to many (poly) different forms (morph) of data</p>
<p>eg:str和repr</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030163210340.png" alt="image-20221030163210340" style="zoom: 67%;" />

<h6 id="Defining-the-repr-function"><a href="#Defining-the-repr-function" class="headerlink" title="Defining the repr function"></a>Defining the <code>repr</code> function</h6><p>apply correctly to all data types, to be a generic or <em>polymorphic function</em></p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030170212859.png" alt="image-20221030170212859"></p>
<p>具体什么意思可以看后文的bear的例子</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030170724649.png" alt="image-20221030170724649" style="zoom:67%;" />

<p>为什么不是4:因为class的repr有参数self</p>
<h6 id="Defining-the-str-function"><a href="#Defining-the-str-function" class="headerlink" title="Defining the str function"></a>Defining the <code>str</code> function</h6><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030165612780.png" alt="image-20221030165612780" style="zoom: 80%;" />

<hr>
<p>eg</p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030165719096.png" alt="image-20221030165719096" style="zoom:80%;" /><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030165743440.png" alt="image-20221030165743440" style="zoom:67%;" /></p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030165757180.png" alt="image-20221030165757180" style="zoom:80%;" /><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030165806988.png" style="zoom:80%;" /></p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030170002065.png" alt="image-20221030170002065" style="zoom:67%;" /><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030170013942.png" alt="image-20221030170013942" style="zoom:80%;" /></p>
<p>看出call repr()的时候ignore了<strong>instance</strong>的<code>__repr__()</code>而是使用了<strong>class</strong>的</p>
<p>再试一试自己定义<code>repr(x)</code>和<code>str(x)</code></p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030171008697.png" alt="image-20221030171008697" style="zoom:67%;" /><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030171022332.png" alt="image-20221030171022332" style="zoom:67%;" /></p>
<h6 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h6><p> Objects interact by looking up attributes on each other</p>
<p>An interface is a set of shared messages, along with a specification of what they mean</p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030172825302.png" alt="image-20221030172825302"></p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030173157528.png" alt="image-20221030173157528" style="zoom:80%;" />

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030173210041.png" alt="image-20221030173210041" style="zoom:80%;" />

<h4 id="Special-Method-Names"><a href="#Special-Method-Names" class="headerlink" title="Special Method Names"></a>Special Method Names</h4><p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030173521762.png" alt="image-20221030173521762"></p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030173625363.png" alt="image-20221030173625363"></p>
<p>对,这些都是special method names哟~</p>
<hr>
<p>来看看add:</p>
<p>Adding instances of user-defined classes invokes either the <strong>add</strong> or <strong>radd</strong> method</p>
<p>要重载</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030173939092.png" alt="image-20221030173939092" style="zoom:67%;" />

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030175557733.png" alt="image-20221030175557733" style="zoom: 67%;" />

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030175814478.png" alt="image-20221030175814478" style="zoom:80%;" />

<h2 id="disc-07"><a href="#disc-07" class="headerlink" title="disc 07"></a>disc 07</h2><p>注意最后一问</p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030180945710.png" alt="image-20221030180945710"></p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221030181006960.png" alt="image-20221030181006960"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/14/CS61A/20-representation%20&%20disc07/" data-id="cld15jd1k000cggpgh5u84sra" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Computer-Sciense/" rel="tag">Computer Sciense</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-CS61A/19-inheritance&amp;lab7" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/08/13/CS61A/19-inheritance&lab7/" class="article-date">
  <time datetime="2022-08-13T03:33:24.000Z" itemprop="datePublished">2022-08-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CS61A/">CS61A</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/13/CS61A/19-inheritance&lab7/">CS61A-19-inheritance</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id=""><a href="#" class="headerlink" title=""></a></h2><p>recall：attributes</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025203306294.png" alt="image-20221025203306294" style="zoom: 67%;" />

<p>Bound methods are also objects: a function  that has its first parameter “self” already  bound to an instance</p>
<p>Dot expressions:<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025203428763.png" alt="image-20221025203428763" style="zoom:80%;" /></p>
<h4 id="Attribute-Assignment"><a href="#Attribute-Assignment" class="headerlink" title="Attribute Assignment"></a>Attribute Assignment</h4><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025204214064.png" alt="image-20221025204214064" style="zoom:80%;" />

<ul>
<li> If the object is an instance, then assignment sets an instance attribute </li>
<li>If the object is a class, then assignment sets a class attribute<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025204300419.png" alt="image-20221025204300419" style="zoom:80%;" /></li>
</ul>
<p>注意：（某个例子）<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025204651400.png" alt="image-20221025204651400" style="zoom:67%;" /></p>
<p>由于这个instance没有属于instance的attribute named interest（虽然class里有，但这是对instance的操作），因此这里给instance增加了一个叫interest的变量并让它等于0.08</p>
<p>eg：<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025205723781.png" alt="image-20221025205723781"></p>
<p>对class的进行修改，所有instance的interest都被修改了</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025205733156.png" alt="image-20221025205733156" style="zoom:67%;" />

<p>只改jim的，那就只改了jim的，此时jim被创建了新的属于jim的interest</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025205922569.png" alt="image-20221025205922569" style="zoom:67%;" />

<p>再改一次class的，发现jim的没改，因为jim这个instance的interest优先级高于class的了</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025205959559.png" alt="image-20221025205959559" style="zoom: 67%;" />

<h4 id="Inheritance"><a href="#Inheritance" class="headerlink" title="Inheritance"></a>Inheritance</h4><p>用来relate多个classes</p>
<p>A common use: Two similar classes differ in their degree of specialization </p>
<ul>
<li>The specialized class may have the same attributes as the general class</li>
<li> along with some special-case behavior</li>
</ul>
<p>使用格式：</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221028174349732.png" alt="image-20221028174349732" style="zoom:67%;" />

<p>the new subclass ：</p>
<ul>
<li><strong>inherits</strong> attributes of its base class</li>
<li> may <strong>override</strong> certain inherited attributes</li>
</ul>
<p>关于attributes:</p>
<p>Base class attributes <strong>aren’t copied</strong> into subclasses</p>
<p>当你使用一个attribute的时候:</p>
<ol>
<li><p>If it names an attribute in the class, return the attribute value.  </p>
</li>
<li><p>Otherwise, <strong>look up the name in the base class</strong>, if there is one</p>
</li>
</ol>
<h6 id="eg"><a href="#eg" class="headerlink" title="eg"></a>eg</h6><p> <code>CheckingAccount</code> is a specialized type of <code>Account</code></p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221028174940622.png" alt="image-20221028174940622" style="zoom: 67%;" />

<p>class定义长这样:</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221028175058940.png" alt="image-20221028175058940" style="zoom: 67%;" />

<p>使用attributes:</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221028175507334.png" alt="image-20221028175507334" style="zoom:67%;" />

<p>deposit没在checkingaccount被定义,因此寻找父class的</p>
<p>withdraw被定义了,因此就用chekingaccount的了</p>
<h4 id="How-to-design-object-oriented-program"><a href="#How-to-design-object-oriented-program" class="headerlink" title="How to design object-oriented program"></a>How to design object-oriented program</h4><h6 id="for-Inheritance"><a href="#for-Inheritance" class="headerlink" title="for Inheritance"></a>for Inheritance</h6><p>约法:</p>
<ul>
<li>Don’t repeat yourself; use existing implementations 避免老是复制已有的函数(那样很呆)</li>
<li>Look up attributes on instances whenever possible 如果能用父亲的就用(这样简洁) <img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221028180843418.png" alt="image-20221028180843418" style="zoom:80%;" /></li>
</ul>
<h6 id="Inheritance-and-Composition"><a href="#Inheritance-and-Composition" class="headerlink" title="Inheritance and Composition"></a>Inheritance and Composition</h6><ul>
<li>Inheritance is best for representing <strong>is</strong>-a relationships </li>
<li>Composition is best for representing <strong>has</strong>-a relationships</li>
</ul>
<p><strong>is</strong>:account和checkingaccount</p>
<p><strong>has</strong>:这个bank可以has chekingaccount</p>
<h6 id="Attributes-Lookup-Practice"><a href="#Attributes-Lookup-Practice" class="headerlink" title="Attributes Lookup Practice"></a>Attributes Lookup Practice</h6><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221028190929417.png" alt="image-20221028190929417" style="zoom:80%;" />

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221028192025068.png" alt="image-20221028192025068" style="zoom:67%;" />

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221028192033154.png" alt="image-20221028192033154" style="zoom:80%;" />

<p>并没有创造对象,这只是看了下n</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221028192059314.png" alt="image-20221028192059314" style="zoom:80%;" />

<p>因为上一句没有创建C的对象,因此没有改变z,应是相等的</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221028192533634.png" alt="image-20221028192533634" style="zoom:80%;" />

<p>看图中结构,会发现b.z是一个instance</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221028192722455.png" alt="image-20221028192722455" style="zoom:67%;" />

<h4 id="Multiple-Inheritance"><a href="#Multiple-Inheritance" class="headerlink" title="Multiple Inheritance"></a>Multiple Inheritance</h4><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221028202322497.png" alt="image-20221028202322497" style="zoom:67%;" />

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221028202444534.png" alt="image-20221028202444534" style="zoom:67%;" />

<h4 id="Complicated-Inheritance"><a href="#Complicated-Inheritance" class="headerlink" title="Complicated Inheritance"></a>Complicated Inheritance</h4><h1 id="Lab7"><a href="#Lab7" class="headerlink" title="Lab7"></a>Lab7</h1><h4 id="Object-Oriented-Programming"><a href="#Object-Oriented-Programming" class="headerlink" title="Object-Oriented Programming"></a>Object-Oriented Programming</h4><p><strong>Object-oriented programming</strong> (OOP) is a style of programming that allows you to think of code in terms of “objects.” Here’s an example of a <code>Car</code> class:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class Car:</span><br><span class="line">    num_wheels = 4</span><br><span class="line"></span><br><span class="line">    def __init__(self, color):</span><br><span class="line">        self.wheels = Car.num_wheels</span><br><span class="line">        self.color = color</span><br><span class="line"></span><br><span class="line">    def drive(self):</span><br><span class="line">        if self.wheels &lt;= Car.num_wheels:</span><br><span class="line">            return self.color + &#x27; car cannot drive!&#x27;</span><br><span class="line">        return self.color + &#x27; car goes vroom!&#x27;</span><br><span class="line"></span><br><span class="line">    def pop_tire(self):</span><br><span class="line">        if self.wheels &gt; 0:</span><br><span class="line">            self.wheels -= 1</span><br></pre></td></tr></table></figure>

<p>Here’s some terminology:</p>
<ul>
<li><p><strong>class</strong>: a blueprint for how to build a certain type of object. The <code>Car</code> class (shown above) describes the behavior and data that all <code>Car</code> objects have.</p>
</li>
<li><p><strong>instance</strong>: a particular occurrence of a class. In Python, we create instances of a class like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; my_car = Car(&#x27;red&#x27;)</span><br></pre></td></tr></table></figure>

<p><code>my_car</code> is an instance of the <code>Car</code> class.</p>
</li>
<li><p><strong>data attributes</strong>: a variable that belongs to the instance (also called instance variables). Think of a data attribute as a quality of the object: cars have <em>wheels</em> and <em>color</em>, so we have given our <code>Car</code> instance <code>self.wheels</code> and <code>self.color</code> attributes. We can access attributes using <strong>dot notation</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; my_car.color</span><br><span class="line">&#x27;red&#x27;</span><br><span class="line">&gt;&gt;&gt; my_car.wheels</span><br><span class="line">4</span><br></pre></td></tr></table></figure></li>
<li><p><strong>method</strong>: Methods are just like normal functions, except that they are bound to an instance. Think of a method as a “verb” of the class: cars can <em>drive</em> and also <em>pop their tires</em>, so we have given our <code>Car</code> instance the methods <code>drive</code> and <code>pop_tire</code>. We call methods using <strong>dot notation</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; my_car = Car(&#x27;red&#x27;)</span><br><span class="line">&gt;&gt;&gt; my_car.drive()</span><br><span class="line">&#x27;red car goes vroom!&#x27;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>constructor</strong>: As with data abstraction, constructors build an instance of the class. The constructor for car objects is <code>Car(color)</code>. When Python calls that constructor, it immediately calls the <code>__init__</code> method. That’s where we initialize the data attributes:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">def __init__(self, color):</span><br><span class="line">    self.wheels = Car.num_wheels</span><br><span class="line">    self.color = color</span><br></pre></td></tr></table></figure>

<p>The constructor takes in one argument, <code>color</code>. As you can see, this constructor also creates the <code>self.wheels</code> and <code>self.color</code> attributes.</p>
</li>
<li><p><code>self</code>: in Python, <code>self</code> is the first parameter for many methods (in this class, we will only use methods whose first parameter is <code>self</code>). When a method is called, <code>self</code> is bound to an instance of the class. For example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; my_car = Car(&#x27;red&#x27;)</span><br><span class="line">&gt;&gt;&gt; car.drive()</span><br></pre></td></tr></table></figure>

<p>Notice that the <code>drive</code> method takes in <code>self</code> as an argument, but it looks like we didn’t pass one in! This is because the dot notation <em>implicitly</em> passes in <code>car</code> as <code>self</code> for us.</p>
</li>
</ul>
<h4 id="Cars"><a href="#Cars" class="headerlink" title="Cars"></a>Cars</h4><p>对继承更深的理解：</p>
<p>base class就相当于普适的一类，比如说到车，我们就想到它有四个轮子。但是继承它的东西，应该说针对性的细化了，比如卡车耗油更多啥的</p>
<h4 id="accounts"><a href="#accounts" class="headerlink" title="accounts"></a>accounts</h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/13/CS61A/19-inheritance&lab7/" data-id="cld15jd1l000eggpg6mg82vci" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Computer-Sciense/" rel="tag">Computer Sciense</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-问题解决/kkk" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/08/12/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/kkk/" class="article-date">
  <time datetime="2022-08-12T09:23:16.000Z" itemprop="datePublished">2022-08-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Q-A/">Q&A</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/12/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/kkk/">python中pip安装库时出现Read timed out</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="解决办法1：延长timeout时间"><a href="#解决办法1：延长timeout时间" class="headerlink" title="解决办法1：延长timeout时间"></a>解决办法1：延长timeout时间</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip --default-timeout=100 install Package</span><br></pre></td></tr></table></figure>

<p>将Package替换你所需要的库就行</p>
<h3 id="解决办法2：换源，将pip源更换到国内镜像，个人比较推荐这种方法"><a href="#解决办法2：换源，将pip源更换到国内镜像，个人比较推荐这种方法" class="headerlink" title="解决办法2：换源，将pip源更换到国内镜像，个人比较推荐这种方法"></a>解决办法2：换源，将pip源更换到国内镜像，个人比较推荐这种方法</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#例如安装scipy时使用豆瓣的源</span><br><span class="line">pip install --index-url https://pypi.douban.com/simple scipy</span><br><span class="line">#使用清华大学的源</span><br><span class="line">pip install -i https://pypi.tuna.tsinghua.edu.cn/simple –upgrade tensorflow-gpu</span><br></pre></td></tr></table></figure>

<p>豆瓣源是神！超快的啊！</p>
<p>将pip源更换到国内镜像<br>用pip管理工具安装库文件时，默认使用国外的源文件，因此在国内的下载速度会比较慢，可能只有50KB/s。幸好，国内的一些顶级科研机构已经给我们准备好了各种镜像，下载速度可达2MB/s。<br>其中，比较常用的国内镜像包括：</p>
<blockquote>
<p>（1）阿里云 <a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/pypi/simple/">http://mirrors.aliyun.com/pypi/simple/</a><br>（2）豆瓣<a target="_blank" rel="noopener" href="http://pypi.douban.com/simple/">http://pypi.douban.com/simple/</a><br>（3）清华大学 <a target="_blank" rel="noopener" href="https://pypi.tuna.tsinghua.edu.cn/simple/">https://pypi.tuna.tsinghua.edu.cn/simple/</a><br>（4）中国科学技术大学 <a target="_blank" rel="noopener" href="http://pypi.mirrors.ustc.edu.cn/simple/">http://pypi.mirrors.ustc.edu.cn/simple/</a></p>
</blockquote>
<p>以清华源为例，设置方法如下：</p>
<p>可以在使用pip的时候，加上参数-i和镜像地址(如 <a target="_blank" rel="noopener" href="https://pypi.tuna.tsinghua.edu.cn/simple)%EF%BC%8C">https://pypi.tuna.tsinghua.edu.cn/simple)，</a></p>
<p>例如：<code>pip install -i https://pypi.tuna.tsinghua.edu.cn/simple pandas</code>，这样就会从清华镜像安装pandas库。</p>
<p>参考博客：<a target="_blank" rel="noopener" href="https://www.jb51.net/article/240227.htm">python中pip安装库时出现Read timed out解决办法_python_脚本之家 (jb51.net)</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/12/%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/kkk/" data-id="cld15jd2v001vggpgbicahycz" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pip/" rel="tag">pip</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-CS61A/18-object" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/08/12/CS61A/18-object/" class="article-date">
  <time datetime="2022-08-12T03:33:24.000Z" itemprop="datePublished">2022-08-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CS61A/">CS61A</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/12/CS61A/18-object/">CS61A-18-object</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="OOP"><a href="#OOP" class="headerlink" title="OOP"></a>OOP</h2><blockquote>
<p>All values are objects in python</p>
</blockquote>
<p>一个使用示例：<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221021210238791.png" alt="image-20221021210238791" style="zoom: 67%;" /></p>
<h2 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h2><h4 id="Class-statement"><a href="#Class-statement" class="headerlink" title="Class statement:"></a><strong>Class statement</strong>:</h4><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025154412857.png" alt="image-20221025154412857" style="zoom:50%;" />

<ul>
<li>create &amp; bind to <name> in the current environment</li>
<li><suite> create attributes of the class (not names in frames)</li>
</ul>
<p>当class被call时：</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025155609284.png" alt="image-20221025155609284" style="zoom:80%;" />

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025160240135.png" alt="image-20221025160240135" style="zoom:67%;" />

<ul>
<li>A new instance of that class is created</li>
<li><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025155648333.png" alt="image-20221025155648333" style="zoom:50%;" />method被call，<code>self</code>被bound,init里的内容被execute</li>
</ul>
<p><code>__init__</code>叫constructor.</p>
<p><strong>Object identity</strong>:</p>
<p>每一个类都有identity</p>
<p>所以:<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025161356737.png" alt="image-20221025161356737" style="zoom:67%;" /></p>
<h4 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h4><p>method就是定义在suite里的function</p>
<p>使用该类里面的内容时要传递self作为参数</p>
<blockquote>
<p>These def statements create function objects as always, but their names are bound as attributes of the class</p>
<p>虽是函数,但不会再frame里被bound成函数,而是attributes of the class</p>
</blockquote>
<p><strong>invoking methods:</strong></p>
<blockquote>
<p>All invoked methods have access to the object via the self parameter, and so they can all  access and manipulate the object’s state</p>
</blockquote>
<p>method可以通过self指针改变自己:<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025163809895.png" alt="image-20221025163809895" style="zoom:67%;" /></p>
<p>调用时,自用传入self参数,不用另外传:<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025163843977.png" alt="image-20221025163843977" style="zoom:67%;" /></p>
<p><strong>Dot expressions</strong>:</p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025164256579.png" alt="image-20221025164256579" style="zoom:80%;" />

<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025164302600.png" alt="image-20221025164302600" style="zoom:80%;" />

<h4 id="Attributes"><a href="#Attributes" class="headerlink" title="Attributes"></a>Attributes</h4><p>如何查看attribute</p>
<p>看看attribute的值:<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025165146028.png" alt="image-20221025165146028" style="zoom:80%;" /></p>
<p>是否有这个attribute:<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025165316731.png" alt="image-20221025165316731" style="zoom:80%;" /></p>
<p>先看instance里有没有,后看class</p>
<p><strong>python区分method和function:</strong></p>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025165534104.png" alt="image-20221025165534104" style="zoom:80%;" />

<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025165719152.png" alt="image-20221025165719152"></p>
<p>evaluate a dot expression: </p>
<p><img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025165743333.png" alt="image-20221025165743333"></p>
<p><strong>class attribute:</strong></p>
<blockquote>
<p>“shared” across all instances of a class because they are attributes  of the class, not the instance</p>
</blockquote>
<img src="https://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20221025165948546.png" alt="image-20221025165948546" style="zoom:67%;" />

<p>而instance的是在init里定义的</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/12/CS61A/18-object/" data-id="cld15jd1h0008ggpg8hab7x0u" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Computer-Sciense/" rel="tag">Computer Sciense</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-CS61A/lab5" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/08/10/CS61A/lab5/" class="article-date">
  <time datetime="2022-08-10T03:33:24.000Z" itemprop="datePublished">2022-08-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CS61A/">CS61A</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/10/CS61A/lab5/">CS61A-lab5</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a>Lists</h2><h3 id="Q1-Factors-List"><a href="#Q1-Factors-List" class="headerlink" title="Q1: Factors List"></a>Q1: Factors List</h3><p>Write <code>factors_list</code>, which takes a number <code>n</code> and returns a list of its factors in ascending order.</p>
<h5 id="解答"><a href="#解答" class="headerlink" title="解答"></a>解答</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">factors_list</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return a list containing all the numbers that divide `n` evenly, except</span></span><br><span class="line"><span class="string">    for the number itself. Make sure the list is in ascending order.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; factors_list(6)</span></span><br><span class="line"><span class="string">    [1, 2, 3]</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; factors_list(8)</span></span><br><span class="line"><span class="string">    [1, 2, 4]</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; factors_list(28)</span></span><br><span class="line"><span class="string">    [1, 2, 4, 7, 14]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    all_factors = []</span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n // <span class="number">2</span> + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> n % (i + <span class="number">1</span>):</span><br><span class="line">            all_factors.append(i + <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> all_factors</span><br></pre></td></tr></table></figure>

<h3 id="Q2-Flatten"><a href="#Q2-Flatten" class="headerlink" title="Q2: Flatten"></a>Q2: Flatten</h3><p>Write a function <code>flatten</code> that takes a list and “flattens” it. The list could be a deep list, meaning that there could be a multiple layers of nesting within the list.</p>
<p>For example, one use case of <code>flatten</code> could be the following:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; lst = [1, [[2], 3], 4, [5, 6]]</span><br><span class="line">&gt;&gt;&gt; flatten(lst)</span><br><span class="line">[1, 2, 3, 4, 5, 6]</span><br></pre></td></tr></table></figure>

<p>Make sure your solution does not mutate the input list.</p>
<blockquote>
<p><strong>Hint</strong>: you can check if something is a list by using the built-in <code>type</code> function. For example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; type(3) == list</span><br><span class="line">False</span><br><span class="line">&gt;&gt;&gt; type([1, 2, 3]) == list</span><br><span class="line">True</span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="解答-1"><a href="#解答-1" class="headerlink" title="解答"></a>解答</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">flatten</span>(<span class="params">s</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Returns a flattened version of list s.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; flatten([1, 2, 3])     # normal list</span></span><br><span class="line"><span class="string">    [1, 2, 3]</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; x = [1, [2, 3], 4]     # deep list</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; flatten(x)</span></span><br><span class="line"><span class="string">    [1, 2, 3, 4]</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; x # Ensure x is not mutated</span></span><br><span class="line"><span class="string">    [1, [2, 3], 4]</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; x = [[1, [1, 1]], 1, [1, 1]] # deep list</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; flatten(x)</span></span><br><span class="line"><span class="string">    [1, 1, 1, 1, 1, 1]</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; x</span></span><br><span class="line"><span class="string">    [[1, [1, 1]], 1, [1, 1]]</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    f = []</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">rec_flat</span>(<span class="params">s, n</span>):</span><br><span class="line">        <span class="keyword">if</span> n == <span class="built_in">len</span>(s):</span><br><span class="line">            <span class="keyword">return</span> </span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">type</span>(s[n]) != <span class="built_in">list</span>:</span><br><span class="line">            f.append(s[n])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            rec_flat(s[n], <span class="number">0</span>)</span><br><span class="line">        rec_flat(s, n + <span class="number">1</span>)</span><br><span class="line">    rec_flat(s, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> f</span><br></pre></td></tr></table></figure>

<p>pass了但是有点丑……</p>
<p>因为觉得思路蛮递归的（因为要倒回来用之前的步骤），所以选择了递归。</p>
<p>思路：</p>
<ol>
<li><p>扫描这个list</p>
</li>
<li><p>如果元素不是list，就加入f，去看下一个元素；</p>
</li>
<li><p>如果元素是list，那就针对这个list，从1.开始</p>
</li>
<li><p>如果扫描完了就结束这一次扫描</p>
</li>
</ol>
<h2 id="Data-Abstraction"><a href="#Data-Abstraction" class="headerlink" title="Data Abstraction"></a>Data Abstraction</h2><p>Say we have an abstract data type for cities. A city has a name, a latitude coordinate, and a longitude coordinate.</p>
<p>Our data abstraction has one <strong>constructor</strong>:</p>
<ul>
<li><code>make_city(name, lat, lon)</code>: Creates a city object with the given name, latitude, and longitude.</li>
</ul>
<p>We also have the following <strong>selectors</strong> in order to get the information for each city:</p>
<ul>
<li><code>get_name(city)</code>: Returns the city’s name</li>
<li><code>get_lat(city)</code>: Returns the city’s latitude</li>
<li><code>get_lon(city)</code>: Returns the city’s longitude</li>
</ul>
<p>Here is how we would use the constructor and selectors to create cities and extract their information:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; berkeley = make_city(&#x27;Berkeley&#x27;, 122, 37)</span><br><span class="line">&gt;&gt;&gt; get_name(berkeley)</span><br><span class="line">&#x27;Berkeley&#x27;</span><br><span class="line">&gt;&gt;&gt; get_lat(berkeley)</span><br><span class="line">122</span><br><span class="line">&gt;&gt;&gt; new_york = make_city(&#x27;New York City&#x27;, 74, 40)</span><br><span class="line">&gt;&gt;&gt; get_lon(new_york)</span><br><span class="line">40</span><br></pre></td></tr></table></figure>

<p>All of the selector and constructor functions can be found in the lab file, if you are curious to see how they are implemented. However, the point of data abstraction is that we do not need to know how an abstract data type is implemented, but rather just how we can interact with and use the data type.</p>
<h3 id="Q3-Distance"><a href="#Q3-Distance" class="headerlink" title="Q3: Distance"></a>Q3: Distance</h3><p>We will now implement the function <code>distance</code>, which computes the distance between two city objects. Recall that the distance between two coordinate pairs <code>(x1, y1)</code> and <code>(x2, y2)</code> can be found by calculating the <code>sqrt</code> of <code>(x1 - x2)**2 + (y1 - y2)**2</code>. We have already imported <code>sqrt</code> for your convenience. Use the latitude and longitude of a city as its coordinates; you’ll need to use the selectors to access this info!</p>
<h5 id="解答-2"><a href="#解答-2" class="headerlink" title="解答"></a>解答</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">distance</span>(<span class="params">city_a, city_b</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; city_a = make_city(&#x27;city_a&#x27;, 0, 1)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; city_b = make_city(&#x27;city_b&#x27;, 0, 2)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; distance(city_a, city_b)</span></span><br><span class="line"><span class="string">    1.0</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; city_c = make_city(&#x27;city_c&#x27;, 6.5, 12)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; city_d = make_city(&#x27;city_d&#x27;, 2.5, 15)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; distance(city_c, city_d)</span></span><br><span class="line"><span class="string">    5.0</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    x1 = get_lat(city_a)</span><br><span class="line">    y1 = get_lon(city_a)</span><br><span class="line">    x2 = get_lat(city_b)</span><br><span class="line">    y2 = get_lon(city_b)</span><br><span class="line">    <span class="keyword">return</span> sqrt((x1 - x2)**<span class="number">2</span> + </span><br><span class="line">                (y1 - y2)**<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Q4-Closer-city"><a href="#Q4-Closer-city" class="headerlink" title="Q4: Closer city"></a>Q4: Closer city</h3><p>Next, implement <code>closer_city</code>, a function that takes a latitude, longitude, and two cities, and returns the name of the city that is relatively closer to the provided latitude and longitude.</p>
<p>You may only use the selectors and constructors introduced above and the <code>distance</code> function you just defined for this question.</p>
<blockquote>
<p><strong>Hint</strong>: How can you use your <code>distance</code> function to find the distance between the given location and each of the given cities?</p>
</blockquote>
<h5 id="解答-3"><a href="#解答-3" class="headerlink" title="解答"></a>解答</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">closer_city</span>(<span class="params">lat, lon, city_a, city_b</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Returns the name of either city_a or city_b, whichever is closest to</span></span><br><span class="line"><span class="string">    coordinate (lat, lon). If the two cities are the same distance away</span></span><br><span class="line"><span class="string">    from the coordinate, consider city_b to be the closer city.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; berkeley = make_city(&#x27;Berkeley&#x27;, 37.87, 112.26)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; stanford = make_city(&#x27;Stanford&#x27;, 34.05, 118.25)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; closer_city(38.33, 121.44, berkeley, stanford)</span></span><br><span class="line"><span class="string">    &#x27;Stanford&#x27;</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; bucharest = make_city(&#x27;Bucharest&#x27;, 44.43, 26.10)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; vienna = make_city(&#x27;Vienna&#x27;, 48.20, 16.37)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; closer_city(41.29, 174.78, bucharest, vienna)</span></span><br><span class="line"><span class="string">    &#x27;Bucharest&#x27;</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    sample_city = make_city(<span class="string">&#x27;sample&#x27;</span>, lat, lon)</span><br><span class="line">    dist_a = distance(sample_city, city_a)</span><br><span class="line">    dist_b = distance(sample_city, city_b)</span><br><span class="line">    <span class="keyword">if</span> dist_a &gt; dist_b:</span><br><span class="line">        <span class="keyword">return</span> get_name(city_b)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> get_name(city_a)</span><br></pre></td></tr></table></figure>

<h3 id="Q5-Don’t-violate-the-abstraction-barrier"><a href="#Q5-Don’t-violate-the-abstraction-barrier" class="headerlink" title="Q5: Don’t violate the abstraction barrier!"></a>Q5: Don’t violate the abstraction barrier!</h3><p>When writing functions that use an data abstraction, we should use the constructor(s) and selector(s) whenever possible instead of assuming the data abstraction’s implementation. Relying on a data abstraction’s underlying implementation is known as <em>violating the abstraction barrier</em>, and we never want to do this!</p>
<p>通过了,说明之前的code没有越过barrier!芜湖~</p>
<h2 id="Trees"><a href="#Trees" class="headerlink" title="Trees"></a>Trees</h2><h3 id="Tree-review"><a href="#Tree-review" class="headerlink" title="Tree review"></a>Tree review</h3><p>A <code>tree</code> is a data structure that represents a hierarchy of information. A file system is a good example of a tree structure. For example, within your <code>cs61a</code> folder, you have folders separating your <code>projects</code>, <code>lab</code> assignments, and <code>homework</code>. The next level is folders that separate different assignments, <code>hw01</code>, <code>lab01</code>, <code>hog</code>, etc., and inside those are the files themselves, including the starter files and <code>ok</code>. Below is an incomplete diagram of what your <code>cs61a</code> directory might look like.</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220810121735858.png" alt="cs61a_tree"></p>
<p>As you can see, unlike trees in nature, the tree abstract data type is drawn with the root at the top and the leaves at the bottom.</p>
<p>Some tree terminology:</p>
<ul>
<li><strong>root</strong>: the node at the top of the tree</li>
<li><strong>label</strong>: the value in a node</li>
<li><strong>branches</strong>: a list of trees directly under the tree’s root</li>
<li><strong>leaf</strong>: a tree with zero branches</li>
<li><strong>node</strong>: any location within the tree (e.g., root node, leaf nodes, etc.)</li>
</ul>
<p>Our <code>tree</code> abstract data type consists of a root and a list of its <code>branches</code>. To create a tree and access its root value and branches, use the following constructor and selectors:</p>
<ul>
<li>Constructor<ul>
<li><code>tree(label, branches=[])</code>: creates a tree object with the given <code>label</code> value at its root node and list of <code>branches</code>. Notice that the second argument to this constructor, <code>branches</code>, is optional - if you want to make a tree with no branches, leave this argument empty.</li>
</ul>
</li>
<li>Selectors<ul>
<li><code>label(tree)</code>: returns the value in the root node of <code>tree</code>.</li>
<li><code>branches(tree)</code>: returns the list of branches of the given <code>tree</code>.</li>
</ul>
</li>
<li>Convenience function<ul>
<li><code>is_leaf(tree)</code>: returns <code>True</code> if <code>tree</code>‘s list of <code>branches</code> is empty, and <code>False</code> otherwise.</li>
</ul>
</li>
</ul>
<p>For example, the tree generated by</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">number_tree = tree(1,</span><br><span class="line">         [tree(2),</span><br><span class="line">          tree(3,</span><br><span class="line">               [tree(4),</span><br><span class="line">                tree(5)]),</span><br><span class="line">          tree(6,</span><br><span class="line">               [tree(7)])])</span><br></pre></td></tr></table></figure>

<p>would look like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   1</span><br><span class="line"> / | \</span><br><span class="line">2  3  6</span><br><span class="line">  / \  \</span><br><span class="line"> 4   5  7</span><br></pre></td></tr></table></figure>

<p>To extract the number <code>3</code> from this tree, which is the label of the root of its second branch, we would do this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">label(branches(number_tree)[1])</span><br></pre></td></tr></table></figure>

<p>The <code>print_tree</code> function prints out a tree in a human-readable form. The exact form follows the pattern illustrated above, where the root is unindented, and each of its branches is indented one level further.</p>
<p>def print_tree(t, indent=0):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;Print a representation of this tree in which each node is</span><br><span class="line">indented by two spaces times its depth from the root.</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; print_tree(tree(1))</span><br><span class="line">1</span><br><span class="line">&gt;&gt;&gt; print_tree(tree(1, [tree(2)]))</span><br><span class="line">1</span><br><span class="line">  2</span><br><span class="line">&gt;&gt;&gt; numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])</span><br><span class="line">&gt;&gt;&gt; print_tree(numbers)</span><br><span class="line">1</span><br><span class="line">  2</span><br><span class="line">  3</span><br><span class="line">    4</span><br><span class="line">    5</span><br><span class="line">  6</span><br><span class="line">    7</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">print(&#x27;  &#x27; * indent + str(label(t)))</span><br><span class="line">for b in branches(t):</span><br><span class="line">    print_tree(b, indent + 1)</span><br></pre></td></tr></table></figure>

<h3 id="Q6-Finding-Berries"><a href="#Q6-Finding-Berries" class="headerlink" title="Q6: Finding Berries!"></a>Q6: Finding Berries!</h3><p>The squirrels on campus need your help! There are a lot of trees on campus and the squirrels would like to know which ones contain berries. Define the function <code>berry_finder</code>, which takes in a tree and returns <code>True</code> if the tree contains a node with the value <code>&#39;berry&#39;</code> and <code>False</code> otherwise.</p>
<blockquote>
<p><strong>Hint</strong>: To iterate through each of the branches of a particular tree, you can consider using a <code>for</code> loop to get each branch.</p>
</blockquote>
<h5 id="回答"><a href="#回答" class="headerlink" title="回答"></a>回答</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">berry_finder</span>(<span class="params">t</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Returns True if t contains a node with the value &#x27;berry&#x27; and </span></span><br><span class="line"><span class="string">    False otherwise.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; scrat = tree(&#x27;berry&#x27;)</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; berry_finder(scrat)</span></span><br><span class="line"><span class="string">    True</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; sproul = tree(&#x27;roots&#x27;, [tree(&#x27;branch1&#x27;, [tree(&#x27;leaf&#x27;), tree(&#x27;berry&#x27;)]), tree(&#x27;branch2&#x27;)])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; berry_finder(sproul)</span></span><br><span class="line"><span class="string">    True</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; berry_finder(numbers)</span></span><br><span class="line"><span class="string">    False</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; t = tree(1, [tree(&#x27;berry&#x27;,[tree(&#x27;not berry&#x27;)])])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; berry_finder(t)</span></span><br><span class="line"><span class="string">    True</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="keyword">if</span> label(t) == <span class="string">&#x27;berry&#x27;</span>:</span><br><span class="line">        is_berry = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        is_berry = <span class="literal">False</span> <span class="comment">#</span></span><br><span class="line">    <span class="keyword">for</span> branch <span class="keyword">in</span> branches(t):</span><br><span class="line">        is_berry = is_berry <span class="keyword">or</span> berry_finder(branch)</span><br><span class="line">    <span class="keyword">return</span> is_berry</span><br></pre></td></tr></table></figure>

<p>tree的先根后结点的搜索方式。</p>
<p>如何让它找到一个berry就能返回<code>True</code>呢，我这里用的是全部用或语句连接的方式。</p>
<p>#号部分并不会使其出现一个<code>False</code>就返回<code>False</code>.因为在不同的frame噢(可以思考一下)</p>
<p>另一种写法:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> label(t) == <span class="string">&#x27;berry&#x27;</span>:</span><br><span class="line">    is_berry = <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    is_berry = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> branch <span class="keyword">in</span> branches(t):</span><br><span class="line">    is_berry += berry_finder(branch)</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">bool</span>(is_berry)</span><br></pre></td></tr></table></figure>

<p>解法2:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> label(t) == <span class="string">&#x27;berry&#x27;</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"><span class="keyword">for</span> branch <span class="keyword">in</span> branches(t):</span><br><span class="line">    <span class="keyword">if</span> berry_finder(branch):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>



<h3 id="Q7-Sprout-leaves"><a href="#Q7-Sprout-leaves" class="headerlink" title="Q7: Sprout leaves"></a>Q7: Sprout leaves</h3><p>Define a function <code>sprout_leaves</code> that takes in a tree, <code>t</code>, and a list of leaves, <code>leaves</code>. It produces a new tree that is identical to <code>t</code>, but where each old leaf node has new branches, one for each leaf in <code>leaves</code>.</p>
<p>For example, say we have the tree <code>t = tree(1, [tree(2), tree(3, [tree(4)])])</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  1</span><br><span class="line"> / \</span><br><span class="line">2   3</span><br><span class="line">    |</span><br><span class="line">    4</span><br></pre></td></tr></table></figure>

<p>If we call <code>sprout_leaves(t, [5, 6])</code>, the result is the following tree:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">     1</span><br><span class="line">   /   \</span><br><span class="line">  2     3</span><br><span class="line"> / \    |</span><br><span class="line">5   6   4</span><br><span class="line">       / \</span><br><span class="line">      5   6</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sprout_leaves</span>(<span class="params">t, leaves</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Sprout new leaves containing the data in leaves at each leaf in</span></span><br><span class="line"><span class="string">    the original tree t and return the resulting tree.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; t1 = tree(1, [tree(2), tree(3)])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; print_tree(t1)</span></span><br><span class="line"><span class="string">    1</span></span><br><span class="line"><span class="string">      2</span></span><br><span class="line"><span class="string">      3</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; new1 = sprout_leaves(t1, [4, 5])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; print_tree(new1)</span></span><br><span class="line"><span class="string">    1</span></span><br><span class="line"><span class="string">      2</span></span><br><span class="line"><span class="string">        4</span></span><br><span class="line"><span class="string">        5</span></span><br><span class="line"><span class="string">      3</span></span><br><span class="line"><span class="string">        4</span></span><br><span class="line"><span class="string">        5</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; t2 = tree(1, [tree(2, [tree(3)])])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; print_tree(t2)</span></span><br><span class="line"><span class="string">    1</span></span><br><span class="line"><span class="string">      2</span></span><br><span class="line"><span class="string">        3</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; new2 = sprout_leaves(t2, [6, 1, 2])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; print_tree(new2)</span></span><br><span class="line"><span class="string">    1</span></span><br><span class="line"><span class="string">      2</span></span><br><span class="line"><span class="string">        3</span></span><br><span class="line"><span class="string">          6</span></span><br><span class="line"><span class="string">          1</span></span><br><span class="line"><span class="string">          2</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="keyword">if</span> is_leaf(t):</span><br><span class="line">        <span class="keyword">return</span> tree(label(t), [tree(i) <span class="keyword">for</span> i <span class="keyword">in</span> leaves])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> tree(label(t),</span><br><span class="line">                    [sprout_leaves(j, leaves) <span class="keyword">for</span> j <span class="keyword">in</span> branches(t)])</span><br></pre></td></tr></table></figure>

<p>不能用append</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/10/CS61A/lab5/" data-id="cld15jd2q001gggpg62x41ko2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Computer-Sciense/" rel="tag">Computer Sciense</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-CS61A/14-mutability" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/08/09/CS61A/14-mutability/" class="article-date">
  <time datetime="2022-08-09T10:33:24.000Z" itemprop="datePublished">2022-08-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CS61A/">CS61A</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/08/09/CS61A/14-mutability/">CS61A-14-Mutability</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Objects"><a href="#Objects" class="headerlink" title="Objects"></a>Objects</h2><p>示例：<code>datetime</code></p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809175808356.png" alt="datetime"></p>
<h5 id="Object是什么"><a href="#Object是什么" class="headerlink" title="Object是什么"></a>Object是什么</h5><p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809180013314.png"></p>
<h2 id="Example：Strings"><a href="#Example：Strings" class="headerlink" title="Example：Strings"></a>Example：Strings</h2><p>Strings are objects</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809180058638.png" alt="对对象string使用function"></p>
<h5 id="Representing-Strings-ASCII"><a href="#Representing-Strings-ASCII" class="headerlink" title="Representing Strings:ASCII"></a>Representing Strings:ASCII</h5><p>我们熟悉的ascii编码</p>
<p>Line feed:换行</p>
<p>Bell：ring the bell</p>
<p>横轴和竖轴的坐标表示16进制的两个数字</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809180351403.png" alt="ASCII"></p>
<p>查看ascii编码：</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809180454481.png"></p>
<p>所以A在表格里坐标为<code>(4, 1)</code>的地方</p>
<p>前两行的使用：</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809180557019.png"></p>
<p>叮叮叮！</p>
<h5 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h5><p>可以表示中文了</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809180747651.png" alt="还有emoji呢"></p>
<p>一些用法</p>
<p>name：这个character的名字</p>
<p>look：找这个名字的character</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809180920488.png" alt="Look how smiled it is!"></p>
<p>其他emoji：<img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809181030778.png" alt="Hello,baby!"></p>
<p>查看表示这个baby emoji的编码，使用<code>encode()</code>:<img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809181146314.png" alt="A的encoding就是A"></p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809181927729.png" alt="玩起来了"></p>
<h2 id="Mutation-Operations"><a href="#Mutation-Operations" class="headerlink" title="Mutation Operations"></a>Mutation Operations</h2><blockquote>
<p>Objects can actually change value overtime.</p>
</blockquote>
<p>引入例子：</p>
<p><code>pop()</code>:丢掉了最后一个，return丢掉的这个</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809181644553.png" alt="suits的故事"></p>
<p>可以发现<code>original_suits</code>和<code>suits</code>一起变了</p>
<h5 id="some-objects-can-change"><a href="#some-objects-can-change" class="headerlink" title="some objects can change"></a>some objects can change</h5><p>Jessica长大了：</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809182130011.png" alt="image-20220809182130011" style="zoom:67%;" /><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809182153182.png" alt="image-20220809182153182" style="zoom:67%;" /></p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809182209059.png" alt="image-20220809182209059" style="zoom:67%;" /><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809182222369.png" alt="image-20220809182222369" style="zoom:67%;" /></p>
<p>改变了bound过去的变量<code>jessica</code>也会改变这个object</p>
<p>mutation：改变，变异</p>
<p>mutable：可以变的（像tuple就不能变哦）</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809182051529.png" alt="demo"></p>
<p>list和dict只是举例。</p>
<p>拿dict为例：</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809182451497.png" alt="对字典对象的操作"></p>
<h5 id="Mutation-can-happen-within-a-function-call"><a href="#Mutation-can-happen-within-a-function-call" class="headerlink" title="Mutation can happen within a function call"></a>Mutation can happen within a function call</h5><p>使用<code>mystery()</code>改变了<code>four</code></p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809182551903.png"></p>
<p>Let’s have a look at the frame:<img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809182807015.png" alt="environmental frame"></p>
<p>and this <code>mystery()</code> can do the same thing:<img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809182739319.png"></p>
<p>If no arguments:</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809182912832.png" alt="another_mystery()has no arguments"></p>
<p>It still work!</p>
<p>That’s because it can search the global frame and it just find <code>four</code>!</p>
<h2 id="Tuples"><a href="#Tuples" class="headerlink" title="Tuples"></a>Tuples</h2><blockquote>
<p>Immutable sequences.</p>
</blockquote>
<p>If you dont type <code>()</code> and just type a sequence, you can still get a tuple!</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809183217619.png" alt="still tuple"></p>
<p>Make a empty tuple:<img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809183249435.png"></p>
<p>Call tuple:<img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809183318528.png"></p>
<p>If I wanna have a tuple which has only one argument:<img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809183408203.png"></p>
<p>some operations:<img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809183445382.png"></p>
<p>Because it’s <strong>immutable</strong>,so we can use it as <strong>a key in dict</strong>:</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809183618643.png" alt="mutable lsts are not allowed"></p>
<h5 id="Tuples-r-immutable"><a href="#Tuples-r-immutable" class="headerlink" title="Tuples r immutable"></a>Tuples r immutable</h5><p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809183819513.png" alt="immutable"></p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809184010513.png"></p>
<p>可以变的情况:</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809184023658.png" alt="somehow mutable"></p>
<h2 id="Mutation"><a href="#Mutation" class="headerlink" title="Mutation"></a>Mutation</h2><h5 id="Sameness-and-Change"><a href="#Sameness-and-Change" class="headerlink" title="Sameness and Change"></a>Sameness and Change</h5><p>在左侧,a和b是 the same list,所以会一起变</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809192002856.png"></p>
<h5 id="Identity-Operators"><a href="#Identity-Operators" class="headerlink" title="Identity Operators"></a>Identity Operators</h5><p>两个符号的区别:<code>is</code> is more stricted</p>
<p><code>is</code>:the same</p>
<p><code>==</code>:equal</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809192131090.png" alt="Difference"></p>
<p>eg.</p>
<p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809192249745.png" alt="example"></p>
<h5 id="Mutable-default-arguments-r-dangerous"><a href="#Mutable-default-arguments-r-dangerous" class="headerlink" title="Mutable default arguments r dangerous"></a>Mutable default arguments r dangerous</h5><p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809192611557.png"></p>
<p>第二次及之后 call f的时候,s is bound to the same list.</p>
<p>因为默认值是函数内变量的一部分,不会因为call它就重新生成</p>
<blockquote>
<p>Q:Hi,does anyone knows why I call f 3 times and s is bound to the same list instead of create a new list?</p>
<p>A:Default arguments in python are <strong>evaluated <em>once</em></strong> when the function is <strong>defined</strong>, <em>not</em> each time the function is <strong>called</strong>. This means that if you have a mutable default argument and mutate it, you will have mutated that object for all future calls to the function as well.</p>
</blockquote>
<h2 id="Mutable-Functions"><a href="#Mutable-Functions" class="headerlink" title="Mutable Functions"></a>Mutable Functions</h2><h5 id="A-function-with-behavior-that-varies-over-time"><a href="#A-function-with-behavior-that-varies-over-time" class="headerlink" title="A function with behavior that varies over time"></a>A function with behavior that varies over time</h5><p>example:<img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809194353626.png"></p>
<h5 id="Mutable-values-amp-persistent-local-state"><a href="#Mutable-values-amp-persistent-local-state" class="headerlink" title="Mutable values &amp; persistent local state"></a>Mutable values &amp; persistent local state</h5><p><img src="http://camillle-img.oss-cn-hangzhou.aliyuncs.com/img/image-20220809205213464.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/08/09/CS61A/14-mutability/" data-id="cld15jd160002ggpg5pidclq2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Computer-Sciense/" rel="tag">Computer Sciense</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CS61A/">CS61A</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Essay-Notes/">Essay Notes</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Q-A/">Q&A</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E5%AD%97%E8%99%9A%E6%8B%9F%E4%BA%BA/">数字虚拟人</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%8E%E5%AE%8F%E6%AF%85%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">李宏毅机器学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%BE%E5%86%85/">课内</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Computer-Sciense/" rel="tag">Computer Sciense</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Deep-learning/" rel="tag">Deep learning</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Security/" rel="tag">Security</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UE/" rel="tag">UE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/compiler/" rel="tag">compiler</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pip/" rel="tag">pip</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Computer-Sciense/" style="font-size: 20px;">Computer Sciense</a> <a href="/tags/Deep-learning/" style="font-size: 10px;">Deep learning</a> <a href="/tags/Security/" style="font-size: 10px;">Security</a> <a href="/tags/UE/" style="font-size: 15px;">UE</a> <a href="/tags/compiler/" style="font-size: 10px;">compiler</a> <a href="/tags/pip/" style="font-size: 10px;">pip</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">November 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/01/18/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2022/11/12/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/">CS61A-18-object</a>
          </li>
        
          <li>
            <a href="/2022/11/06/CS61A/25-users/">(no title)</a>
          </li>
        
          <li>
            <a href="/2022/11/04/CS61A/21-2-project%20Ants/">(no title)</a>
          </li>
        
          <li>
            <a href="/2022/11/02/CS61A/22-effiency/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>